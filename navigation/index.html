<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="module" src="/sofi/js/script.js"></script>
<link rel="stylesheet" href="/sofi/css/estil.css">

<header>
    <h1>Navigation</h1>

    <abstract>
        <p>El componente
            <a href="https://developer.android.com/guide/navigation/navigation-ui">Navigation</a> 
            incluye una clase <w>NavigationUI</w>. Esta clase contiene métodos estáticos que 
            administran la navegación con el <w>NavigationView</w>, el <w>BottomNavigationView</w> 
            y el <w>OptionsMenu</w>.</p>

        <img src="img/NavigationUI.png">

        <p>Además de usar estos elementos de navegación, en esta práctica usaremos también 
            la navegación mediante Tabs (o pestañas), usando los elementos <w>TabLayout</w>
            y <w>ViewPager</w>, aunque estos no están incluidos en el 
            componente Navigation.
        </p>

        <img src="img/TabLayoutViewPager.png">

        <p>Desarrollaremos una app que permitirá navegar entre destinos usando todos estos elementos.
        </p>
        <img src="img/b5f2a56cccf01234.gif">        
        <a href="https://github.com/gerardfp/navigation">https://github.com/gerardfp/navigation</a>
    </abstract>
</header>
            
<section><h2>Crea el proyecto</h2>

    <warn>
        <p>En el asistente de "Nueva Activity", Android Studio proporciona plantillas para crear 
            Activities que incluyen estos componentes
            de navegación. Sin embargo, esta vez lo haremos "desde 0", para comprender todos 
        los elementos que intervienen.</p>    
    </warn>

    <ol>

    <li>
        <p>Selecciona &#34;<strong>Empty Activity</strong>&#34; como plantilla para la MainActivity</p>
    </li>

    <li>
        <p>Añade las dependencias para incluir el componente Navigation</p>
    
        <codefile>
            build.gradle (Module: app)
        </codefile>
        <code>
            dependencies {
                implementation &#39;com.google.android.material:material:1.0.0&#39;

                implementation &#39;androidx.navigation:navigation-fragment:2.3.0&#39;
                implementation &#39;androidx.navigation:navigation-ui:2.3.0&#39;
            }
        </code>
    </li> 

    <li>
        <p>Crea también el grafo de navegación: <file>res/navigation/nav_graph.xml</file></p>

        <img src="img/create_nav_graph.png">
    </li>
</ol>

</section>

<section>
    <h2>NavigationMenu</h2>

    <p>El <w>NavigationView</w> (más conocido como "Drawer menu") es el menú de navegación que 
    suele aparecer por la izquierda de la app cuando se pulsa el icono Hamburger <img src="img/hamburger.png">.</p>

    <p>En esta app usaremos el <w>NavigationView</w> para navegar a 3 pantallas. Empezaremos creando estas 3 pantallas.</p>
 
 
    <p>Normalmente tiene dos partes: la cabecera y el menú:</p>
    
    <img src="img/navigationview.png">

    <ul>

        <li>
            <p>El layout de la <strong>cabecera</strong> se crea en un fichero a parte, y luego se 
            enlaza con el menú. Definiremos la cabecera en el archivo <file>res/layout/nav_header_main.xml</file>.</p>

            <p>Haz clic-derecho sobre la carpeta <directory>res/layout</directory> y ve a <menuoption>New</menuoption> &gt; <menuoption>Layout Resource File</menuoption> e 
            introduce el <menuoption>File name</menuoption>: <name>nav_header_main</name></p>

            <img src="img/3b87eacadcef691.png">

            <p>Ahora añadiremos una imagen y un texto que se verán en la cabecera del menu:</p>
            
            <img src="img/nav_header_main.png">

            <codefile>
                res/layout/nav_header_main.xml
            </codefile>
            <code xml>
                &lt;?xml version="1.0" encoding="utf-8"?&gt;
                &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:app="http://schemas.android.com/apk/res-auto"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="#009688"
                    android:gravity="center"
                    android:orientation="vertical"&gt;

                    &lt;ImageView
                        android:id="@+id/imageView"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="48dp"
                        app:srcCompat="@mipmap/ic_launcher_round" /&gt;
                    &lt;TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="8dp"
                        android:text="Android is HARD" /&gt;
                &lt;/LinearLayout&gt;
            </code>

        </li>

        <li>
            <p>Los <strong>items del menu</strong> también se definen en un fichero a parte. Esta vez 
            en un fichero de recurso menú: <file>res/menu/activity_main_drawer.xml</file></p>

            <p>Haz clic-derecho sobre la carpeta <directory>res</directory> y ve a 
                <menuoption>New</menuoption> &gt; <menuoption>Android Resource File</menuoption> e 
                introduce el <menuoption>File name</menuoption>: <name>nav_header_main</name>, 
            y selecciona <menuoption>Resource type</menuoption>: <name>Menu</name>.</p>

            <img src="img/b50dcc0268531c4e.png">
        </li>
    </ul>

    <ol>       
        <li>Añade los siguientes estilos al fichero <file>res/values/styles.xml</file>:<br></li>
    </ol>
    <code xml>
        &lt;style name=&#34;AppTheme.NoActionBar&#34;&gt;
            &lt;item name=&#34;windowActionBar&#34;&gt;false&lt;/item&gt;
            &lt;item name=&#34;windowNoTitle&#34;&gt;true&lt;/item&gt;
            &lt;/style&gt;

            &lt;style name=&#34;AppTheme.AppBarOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Dark.ActionBar&#34; /&gt;

            &lt;style name=&#34;AppTheme.PopupOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Light&#34; /&gt;
        </code>
    <li>Añade el siguiente atributo a la <w>MainActivity</w> en el fichero <file>AndroidManifest.xml</file>:<br></li>
        <code xml>
            android:theme=&#34;@style/AppTheme.NoActionBar&#34;
        </code>
        
        <p><br>Debe quedar algo así:<br></p>
        <code xml>
            &lt;activity
                android:name=&#34;.MainActivity&#34;
                android:theme=&#34;@style/AppTheme.NoActionBar&#34;&gt;
                &lt;intent-filter&gt;
                    &lt;action android:name=&#34;android.intent.action.MAIN&#34; /&gt;

                    &lt;category android:name=&#34;android.intent.category.LAUNCHER&#34; /&gt;
                &lt;/intent-filter&gt;
            &lt;/activity&gt;</code>
<ol type="1" start="7">
<li>Modifica el archivo de layout de la MainActivity (<file>res/layout/activity_main.xml</file>) para añadir la <strong>Toolbar</strong>, el <strong>NavigationView</strong> (<em>Drawer</em>) y el <strong>NavHost</strong>:<br><br></li>
</ol>
<code xml>
    &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
    xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
    xmlns:tools=&#34;http://schemas.android.com/tools&#34;
    android:id=&#34;@+id/drawer_layout&#34;
    android:layout_width=&#34;match_parent&#34;
    android:layout_height=&#34;match_parent&#34;
    android:fitsSystemWindows=&#34;true&#34;
    tools:openDrawer=&#34;start&#34;&gt;

    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout
        android:layout_width=&#34;match_parent&#34;
        android:layout_height=&#34;match_parent&#34;
        tools:context=&#34;.MainActivity&#34;&gt;

        &lt;com.google.android.material.appbar.AppBarLayout
            android:layout_width=&#34;match_parent&#34;
            android:layout_height=&#34;wrap_content&#34;
            android:theme=&#34;@style/AppTheme.AppBarOverlay&#34;&gt;

            &lt;androidx.appcompat.widget.Toolbar
                android:id=&#34;@+id/toolbar&#34;
                android:layout_width=&#34;match_parent&#34;
                android:layout_height=&#34;?attr/actionBarSize&#34;
                android:background=&#34;?attr/colorPrimary&#34;
                app:popupTheme=&#34;@style/AppTheme.PopupOverlay&#34; /&gt;
        &lt;/com.google.android.material.appbar.AppBarLayout&gt;

        &lt;androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width=&#34;match_parent&#34;
            android:layout_height=&#34;match_parent&#34;
            app:layout_behavior=&#34;@string/appbar_scrolling_view_behavior&#34;&gt;

            &lt;fragment
                android:id=&#34;@+id/nav_host_fragment&#34;
                android:name=&#34;androidx.navigation.fragment.NavHostFragment&#34;
                android:layout_width=&#34;match_parent&#34;
                android:layout_height=&#34;match_parent&#34;
                app:defaultNavHost=&#34;true&#34;
                app:layout_constraintLeft_toLeftOf=&#34;parent&#34;
                app:layout_constraintRight_toRightOf=&#34;parent&#34;
                app:layout_constraintTop_toTopOf=&#34;parent&#34;
                app:navGraph=&#34;@navigation/mobile_navigation&#34; /&gt;

        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;

    &lt;com.google.android.material.navigation.NavigationView
        android:id=&#34;@+id/nav_view&#34;
        android:layout_width=&#34;wrap_content&#34;
        android:layout_height=&#34;match_parent&#34;
        android:layout_gravity=&#34;start&#34;
        android:fitsSystemWindows=&#34;true&#34;
        app:headerLayout=&#34;@layout/nav_header_main&#34;
        app:menu=&#34;@menu/activity_main_drawer&#34; /&gt;

    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;
</code>
<ol type="1" start="8">
<li>Añade el siguiente código a la <w>MainActivity.java</w> para configurar la Toolbar y el NavigationView (<em>Drawer</em>):<br></li>
</ol>
<code java>
    import android.os.Bundle;
    import android.view.Menu;

    import com.google.android.material.navigation.NavigationView;

    import androidx.appcompat.app.AppCompatActivity;
    import androidx.appcompat.widget.Toolbar;
    import androidx.drawerlayout.widget.DrawerLayout;
    import androidx.navigation.NavController;
    import androidx.navigation.Navigation;
    import androidx.navigation.ui.AppBarConfiguration;
    import androidx.navigation.ui.NavigationUI;

    public class MainActivity extends AppCompatActivity {

        private AppBarConfiguration mAppBarConfiguration;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Toolbar toolbar = findViewById(R.id.toolbar);
            setSupportActionBar(toolbar);

            DrawerLayout drawer = findViewById(R.id.drawer_layout);
            NavigationView navigationView = findViewById(R.id.nav_view);

            mAppBarConfiguration = new AppBarConfiguration.Builder()
                    .setDrawerLayout(drawer)
                    .build();
            NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
            NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);
            NavigationUI.setupWithNavController(navigationView, navController);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

        @Override
        public boolean onSupportNavigateUp() {
            NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
            return NavigationUI.navigateUp(navController, mAppBarConfiguration)
                    || super.onSupportNavigateUp();
        }
    }
</code>


      </section>
    
      <section><h2>NavigationView (Drawer)</h2>
        <p>Añadiremos tres Destinaciones (Fragments)  al grafo de navegacion <code>res/navigation/mobile_navigation.xml</code>:</p>
<p>Llamaremos a estas destinaciones: <code>Drawer1Fragment</code>, <code>Drawer2Fragment</code>, <code>Drawer3Fragment</code></p>
<img src="img/6801bec15dfcf8a6.png"></p>
<img src="img/cb6088f322c29ddc.png"></p>
<img src="img/89b81dcebdcd09db.png"></p>
<p>Haremos que las tres destinaciones (fragments) que hemos creado, sean accesibles desde el <code>NavigationView</code> (<em>Drawer</em>)</p>
<ol>
<li>Añade los items al menu del drawer <code>res/menu/activity_main_drawer.xml</code>:<br></li>
</ol>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;menu xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt;

   &lt;item
       android:id=&#34;@+id/drawer1Fragment&#34;
       android:title=&#34;Drawer 1&#34; /&gt;

   &lt;item
       android:id=&#34;@+id/drawer2Fragment&#34;
       android:title=&#34;Drawer 2&#34; /&gt;

   &lt;item
       android:id=&#34;@+id/drawer3Fragment&#34;
       android:title=&#34;Drawer 3&#34; /&gt;
&lt;/menu&gt;</code>
<aside class="warning"><p>Los <code>id</code> de los items del menu tienen que coincidir con el <code>id</code> de las destinaciones</p>
</aside>
<ol>
<li>En el archivo <code>MainActivity.java</code>, establece en la configuracion de la AppBar las destinaciones que serán &#34;Top Level&#34;:<br></li>
</ol>
<code>mAppBarConfiguration = new AppBarConfiguration.Builder(
       R.id.drawer1Fragment, R.id.drawer2Fragment
)
       .setDrawerLayout(drawer)
       .build();</code>
<aside class="special"><p>En las destinaciones Top Level se mostrará el icono de acceso al menu <img src="img/12f0f52cb2cca07e.png"> en la AppBar</p>
<p>En las que no sean top level, se mostrará la flecha de volver <img src="img/8daaf9d2048aa14b.png"></p>
</aside>
<ol type="1" start="2">
<li><em>Opcionalmente </em><strong>diseña </strong>una cabecera para el Drawer (<code>res/layout/nav_header_main.xml</code>):<br></li>
</ol>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:gravity=&#34;center&#34;
   android:orientation=&#34;vertical&#34;&gt;

   &lt;ImageView
       android:id=&#34;@+id/imageView&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:paddingTop=&#34;48dp&#34;
       app:srcCompat=&#34;@mipmap/ic_launcher_round&#34; /&gt;

   &lt;TextView
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:paddingTop=&#34;8dp&#34;
       android:text=&#34;Android is&#34; /&gt;

   &lt;TextView
       android:id=&#34;@+id/textView&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:textSize=&#34;24sp&#34;
       android:textStyle=&#34;bold&#34;
       android:text=&#34;HARD&#34; /&gt;

&lt;/LinearLayout&gt;</code>
<p>Debería quedar esta app:</p>
<img src="img/92b558f10e9189d7.gif"></p>
<aside class="special"><p>Observa cómo en destinacion <code>drawer3Fragment</code> se muestra la flecha de volver <img src="img/8daaf9d2048aa14b.png">, ya que no la hemos puesto como Top Level Destination.</p>
</aside>


      </section>
    
      <section><h2>BottomNavigationView</h2>
        <p>Añadiremos tres nuevas destinaciones que serán accesibles desde el <strong>BottomViewNavigation</strong>.<br><br>Las llamaremos <code>Bottom1Fragment</code>, <code>Bottom2Fragment</code> y <code>Bottom3Fragment</code>:</p>
<p>Como paso previo, crea estas 3 destinaciones:</p>
<img src="img/891922c0d3e6d971.png"><br></p>
<ol>
<li>Crea el archivo de menu para el BottomNavigationView (<code>res/menu/bottom_nav_menu.xml</code>):<br></li>
</ol>
<p><img src="img/b82318d502c3608a.png"><br><br>Añade los 3 items al menu, para cada una de las destinaciones (<strong>el </strong><strong><code>id</code></strong><strong> del item debe coincidir con el </strong><strong><code>id</code></strong><strong> de la destinación</strong>):<br></p>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;menu xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt;
   &lt;item
       android:id=&#34;@+id/bottom1Fragment&#34;
       android:title=&#34;Bottom 1&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/bottom2Fragment&#34;
       android:title=&#34;Bottom 2&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/bottom3Fragment&#34;
       android:title=&#34;Bottom 3&#34; /&gt;
&lt;/menu&gt;</code>
<ol type="1" start="2">
<li>Añade el elemento <strong>BottomNavigationView</strong> al layout de la MainActivity (<code>res/layout/activity_main.xml</code>):<br><br>Es importante que lo añadas <strong>justo antes</strong> del NavHostFragment<br></li>
</ol>
<code>&lt;com.google.android.material.bottomnavigation.BottomNavigationView
   android:id=&#34;@+id/bottom_nav_view&#34;
   android:layout_width=&#34;0dp&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:layout_marginStart=&#34;0dp&#34;
   android:layout_marginEnd=&#34;0dp&#34;
   android:background=&#34;?android:attr/windowBackground&#34;
   app:layout_constraintBottom_toBottomOf=&#34;parent&#34;
   app:layout_constraintLeft_toLeftOf=&#34;parent&#34;
   app:layout_constraintRight_toRightOf=&#34;parent&#34;
   app:menu=&#34;@menu/bottom_nav_menu&#34; /&gt;</code>
<ol type="1" start="3">
<li>Configura el BottomNavigationView en la <code>MainActivity.java</code>:<br><br>Añade al final del metodo <code>onCreate()</code> el siguiente código:<br></li>
</ol>
<code>BottomNavigationView bottomNavView = findViewById(R.id.bottom_nav_view);
NavigationUI.setupWithNavController(bottomNavView, navController);</code>
<p><br>Opcionalmente, configura estas 3 destinaciones como &#34;Top Level&#34;:<br></p>
<code>mAppBarConfiguration = new AppBarConfiguration.Builder(
       R.id.drawer1Fragment, R.id.drawer2Fragment,
       R.id.bottom1Fragment, R.id.bottom2Fragment, R.id.bottom3Fragment
)
       .setDrawerLayout(drawer)
       .build();</code>
<ol type="1" start="4">
<li>Opcionalmente, añade unos iconos en cada item del menu del BottomNavigationView (<code>res/menu/bottom_nav_menu.xml</code>):<br></li>
</ol>
<aside class="special"><p>Puedes seleccionar los que ya vienen por defecto, añadir tus propios iconos en la carpeta <code>drawable</code>, o hacer lo siguiente:<br><br><img src="img/52958b27be1467ae.gif"></p>
</aside>
<p><br>Establece los iconos a los items:<br></p>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;menu xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt;
   &lt;item
       android:id=&#34;@+id/bottom1Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Bottom 1&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/bottom2Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Bottom 2&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/bottom3Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Bottom 3&#34; /&gt;
&lt;/menu&gt;</code>
<p>Debería quedar así:</p>
<img src="img/210b969c741e1b5.gif"></p>


      </section>
    
      <section><h2>OptionsMenu</h2>
        <li>Crea el archivo de menu para el OptionsMenu (<code>res/menu/main.xml</code>):<br><br><img src="img/93b243bbe3fd7edc.png"><br></li>

        <p>Añadiremos tres nuevas destinaciones que serán accesibles desde el <strong>Options Menu</strong>.<br><br>Las llamaremos <code>Options1Fragment</code>, <code>Options2Fragment</code> y <code>Options3Fragment</code>:</p>
<p>Crea estas 3 destinaciones:</p>
<ol>
<li>Añade los ítems al Options Menu (<code>res/menu/main.xml</code>):<br></li>
</ol>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;menu xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt;
   &lt;item
       android:id=&#34;@+id/options1Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Options 1&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/options2Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Options 2&#34; /&gt;
   &lt;item
       android:id=&#34;@+id/options3Fragment&#34;
       android:icon=&#34;@drawable/ic_favorite_black_24dp&#34;
       android:title=&#34;Options 3&#34; /&gt;
&lt;/menu&gt;</code>
<ol type="1" start="2">
<li>Configura la navegación del Options Menu en la <code>MainActivity.java</code>:<br><br>Añade el siguiente callback a la clase <code>MainActivity</code>:<br></li>
</ol>
<code>@Override
public boolean onOptionsItemSelected(MenuItem item) {
   NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
   return NavigationUI.onNavDestinationSelected(item, navController)
           || super.onOptionsItemSelected(item);
}</code>
<ol type="1" start="3">
<li><em>Opcionalmente </em>añade estas destinaciones como Top Level:<br></li>
</ol>
<code>mAppBarConfiguration = new AppBarConfiguration.Builder(
       R.id.drawer1Fragment, R.id.drawer2Fragment,
       R.id.bottom1Fragment, R.id.bottom2Fragment, R.id.bottom3Fragment,
       R.id.options1Fragment, R.id.options2Fragment, R.id.options3Fragment
)
       .setDrawerLayout(drawer)
       .build();</code>
<p>Debería quedar así:</p>
<img src="img/3ea1eb038ef16119.gif"></p>


      </section>
    
      <section><h2>TabLayout y ViewPager</h2>
        <img src="img/140dfb6612d40aca.png"></p>
<img src="img/1803c82dfe8e44d1.png"></p>
<p>A modo de ejemplo, añadiremos en el fragment <code>Bottom2Fragment</code> un TabLayout y un ViewPager. También crearemos dos fragments (<code>PageAFragment</code> y <code>PageBFragment</code>) que se mostraran en el ViewPager.</p>
<p>El primer paso será crear los dos fragments <code>PageAFragment</code> y <code>PageBFragment</code>.</p>
<img src="img/cf85da448f5c2fc6.png"></p>
<h3>ViewPager</h2>
<p>Empezaremos con el ViewPager, este se encargará de mostrar bien el <code>PageAFragment</code> o el  <code>PageBFragment</code>. El usuario navegará entre uno y otro haciendo <em>SWIPE</em>.</p>
<ol>
<li>Añade el <strong>ViewPager</strong> al layout del fragment padre (<code>res/layout/fragment_bottom2.xml</code>):<br></li>
</ol>
<code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;FrameLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:tools=&#34;http://schemas.android.com/tools&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   tools:context=&#34;.Bottom2Fragment&#34;&gt;

   &lt;androidx.viewpager.widget.ViewPager
       android:id=&#34;@+id/viewPager&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;/&gt;

&lt;/FrameLayout&gt;</code>
<ol type="1" start="2">
<li>Crea el PagerAdapter en el fichero <code>Bottom2Fragment.java</code>:<br><br><img src="img/a062302b4361811b.gif"><br></li>
</ol>
<code>class DemoPagerAdapter extends FragmentPagerAdapter {

   public DemoPagerAdapter(@NonNull FragmentManager fm, int behavior) {
       super(fm, behavior);
   }

   @NonNull
   @Override
   public Fragment getItem(int position) {
       return null;
   }

   @Override
   public int getCount() {
       return 0;
   }
}</code>
<ul>
<li>En el método <code>getItem()</code> se debe retornar una instancia del Fragment que se debe mostrar en la posicion determinada por el parámetro position.<br><br>En nuestro caso en la posición <code>0</code> va el PageAFragment, y en la posición <code>1</code> va el PageBFragment</li>
<li>En el método <code>getCount()</code> se debe retornar cuántos fragments hay en total. En nuestro caso <code>2</code>.</li>
</ul>
<p><br>El PagerAdapter queda finalmente así:</p>
<code>class DemoPagerAdapter extends FragmentPagerAdapter {

   public DemoPagerAdapter(@NonNull FragmentManager fm, int behavior) {
       super(fm, behavior);
   }

   @NonNull
   @Override
   public Fragment getItem(int position) {
       if(position == 0) return new PageAFragment();
       return new PageBFragment();
   }

   @Override
   public int getCount() {
       return 2;
   }
}</code>
<ol type="1" start="3">
<li>Establece el Adaptador al ViewPager:<br><br>Añade al método <code>onCreateView()</code> el siguiente código:<br></li>
</ol>
<code>ViewPager viewPager = view.findViewById(R.id.viewPager);
viewPager.setAdapter(new DemoPagerAdapter(getChildFragmentManager(), FragmentPagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT));</code>
<p>Debería quedar así:</p>
<img src="img/b2eb8211da75ce38.gif"></p>
<h3>TabLayout</h2>
<p>Añadiremos un TabLayout para que indique al usuario en qué página se encuentra:</p>
<ol>
<li>Añade el TabLayout al layout del Bottom2Fragment (<code>res/layout/fragment_bottom2.xml</code>):<br><br>Añádelo dentro del elemento ViewPager.<br></li>
</ol>
<code>&lt;androidx.viewpager.widget.ViewPager
   android:id=&#34;@+id/viewPager&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;&gt;

   &lt;com.google.android.material.tabs.TabLayout
       android:id=&#34;@+id/tabLayout&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;/&gt;

&lt;/androidx.viewpager.widget.ViewPager&gt;</code>
<ol type="1" start="2">
<li>Conecta el TabLayout con el ViewPager para que ambos vayan sincronizados.<br><br>En el fichero <code>Bottom2Fragment.java</code> añade el siguiente código en el <code>onViewCreated()</code>:<br></li>
</ol>
<code>TabLayout tabLayout = view.findViewById(R.id.tabLayout);
tabLayout.setupWithViewPager(viewPager);</code>
<ol type="1" start="3">
<li>Modifica el PagerAdapter para que muestre los títulos de los tabs correspondientes:<br><br>Añade el siguiente método a la clase <code>DemoPagerAdapter</code>:<br></li>
</ol>
<code>@Override
public CharSequence getPageTitle(int position) {
   if(position == 0) return &#34;A&#34;;
   return &#34;B&#34;;
}</code>
<p>Debería quedar así:</p>
<p><img src="img/7454334dbc9c2b7e.gif"><br><br><br><br><strong>NOTA</strong>: Si quieres que el TabLayout quede &#34;integrado&#34; en la AppBar, puedes cambiarle el color de fondo para que quede el mismo que la AppBar. Tendrás que eliminar la &#34;elevación&#34; (el sombreado) de la AppBar:</p>
<ol>
<li>Cambia los colores del TabLayout (<code>res/layout/fragment_bottom2.xml</code>):<br></li>
</ol>
<code>&lt;com.google.android.material.tabs.TabLayout
   android:id=&#34;@+id/tabLayout&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:background=&#34;?attr/colorPrimary&#34;
   app:tabTextColor=&#34;#CCC&#34;
   app:tabSelectedTextColor=&#34;#FFF&#34;/&gt;</code>
<ol type="1" start="2">
<li>Elimina la elevación de la AppBar (<code>res/layout/activity_main.xml</code>):<br></li>
</ol>
<code>&lt;com.google.android.material.appbar.AppBarLayout
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:theme=&#34;@style/AppTheme.AppBarOverlay&#34;
   app:elevation=&#34;0dp&#34;&gt;</code>


      </section>
    
      <section><h2>Práctica</h2>
        

      </section>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
