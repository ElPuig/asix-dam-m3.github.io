<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="module" src="/sofi/js/script.js"></script>
<link rel="stylesheet" href="/sofi/css/estil.css">

<nav></nav>
<header>
    <h1>Variables i gestió de la memòria</h1>

    <abstract>
        <p>En aquesta activitat aprendràs a gestionar els diferents tipus de dades que permeten treballar amb variables i com aquestes afecten a la memòria del programa.
        </p>
        <p>Aprendràs:</p>
        <check>Què són les variables i com utilitzar-les</check>
    </abstract>
</header>

<section>
    <h2>Tipus i variables</h2>
    <h3>Declaració i inicialització</h3>

    <p>Una <strong>variable</strong> és un espai reservat a la memòria per a
    emmagatzemar valors d'un tipus particular: un string, un número, o altres.
    Cada variable té un <strong>nom</strong> (o <strong>identificador</strong>)
    per a distingir-la d'altres. Abans d'utilitzar una variable, l'has de declarar.
    </p>

    <p>La forma general de declarar una variable és així:</p>

    <sc java>
        TipusDada nomVariable = inicialitzacio;
    </sc>

    <p>La part esquerra d'aquesta sentència descriu la variable, i la part dreta
        descriu el valor que se li ha assignat.
    </p>
    <ul>
        <li>El <strong>tipus</strong> de la variable determina quines possibles
        operacions es poden realitzar sobre la variable i quins valors es poden
        guardar en ella. Aquí hem utilitzat un tipus de dada que no existeix 
        (<w>TipusDada</w>) per a demostrar la forma general de declaració.</li>
        <li>El <strong>nom</strong> (o <strong>identificador</strong>) distingeix
        la variable de les altres. El nom d'una variable no pot començar amb un dígit;
        normalment comença amb una lletra. Sempre s'ha de tractar de escollir noms
        amb significat i que siguin legibles per a fer el codi més fàcil d'entendre.
        </li>
        <li>L'<strong>operador d'assignació</strong> denotat amb <w>=</w> s'utilitza
        per a assignar un valor o un resultat d'una expressió a una variable.</li>
        <li>La <strong>inicialització</strong> és un valor que se li assigna a una
        variable.</li>
    </ul>
    <p>D'acord amb això, podem declarar una variable de tipus <w>String</w> i 
    assignar-li la paraula <string>java</string>:</p>

    <sc java>
        String llenguatge = "java";
    </sc>
    <img src="img/memoria1.png">

    <p>També podem declarar una variable de tipus <w>int</w> i guardar en ella un 
    número enter:</p>

    <sc java>
        int nombreDePomes = 5;
    </sc>
    <img src="img/memoria2.png">


    <warn>
        <p>Lés majúscules i minúscules importen! No és el mateix <w>llenguatge</w>
        que <w>Llenguatge</w>.</p>
    </warn>

    <p>Les variables no solament poden emmagatzemar strings i enters, sinò també 
        caracters, booleans, decimals, i altres tipus que veurem més endavant.
    </p>

    <info>
        <p>Una forma habitual d’entendre les variables és imaginar una variable com una <strong>capsa</strong> 
            on s’hi emmagatzema una dada o valor.</p>
        <img src="img/variable1.png">
        <hr>
        
        <p>Així, hi ha capses de diferents colors, per a emmagatzemar diferents
            <strong>tipus de dades</strong>.
        <br>Per exemple, capses blaves per a <w>String</w> i capses verdes per a <w>int</w>:</p>
        <img src="img/variable2.png">
        <hr>
        
        <p>A les capses se'ls hi ha de posar un <strong>identificador</strong> per
        a distingir-les. L'identificador ha de descriure la dada que s'hi guardarà.</p>
        <img src="img/variable3.png">
        <hr>
        
        <p>Per exemple, si es volen guardar el nom i l'edat d'una persona, es poden
            tenir aquestes capses:
        </p>
        <img src="img/variable4.png">
        <hr>
        
        <p>En cadascuna d'elles s'emmagatzema el valor corresponent:</p>
        <img src="img/variable5.png">
        <sc java>
            String nom = "Joan";
            int edat = 24;
        </sc>
        <hr>

        <p>És un <strong>error</strong> tractar de guardar un tipus de dada en el tipus
        de capsa inadequat:</p>
        <img src="img/variable6.png">
        <sc java>
            int edat = "Joan";  // error!, la variable és int i el valor string
        </sc>
        <hr>

        <p>Per una altra banda, és vàlid posar els <strong>identificadors</strong> que 
            desitjem a les capses, però s'entendrà millor si posem un nom que descrigui
            la dada que s'hi ha de guardar:
        </p>
        <img src="img/variable7.png">
        <sc java>
            int nom = 24; // vàlid! però no té sentit ¿?¿?
        </sc>
        
        </p>
    </info>

    <challenge>
        <p>Resol aquest problema:
            <br>
            <a href="https://dmoj.elpuig.xeill.net/problem/declaracioinvalida">Declaració invàlida de variables</a>
        </p>
    </challenge>

    <h3>Accedir al valor d'una variable</h3>

    <p>Un cop una variable ha estat declarada, el seu valor pot ser accedit i 
        modificat utilitzant el seu nom (identificador). En aquest exemple, declarem
        una variable i després l'imprimim:
    </p>

    <sc java>
        String diaDeLaSetmana = "Dilluns";
        System.out.println(diaDeLaSetmana); // Dilluns
    </sc>

    <p>També es possible assignar el valor d'una variable a una altra variable. A la
        línia <ln>2</ln> d'aquest codi estem assignant a <w>avui</w> el valor de <w>diaDelMes</w>:
    </p>
    <sc java data-line="2">
        int diaDelMes = 25;
        int avui = diaDelMes;
        System.out.println(avui); // 25
        System.out.println(diaDelMes); // 25
    </sc>
    <img src="img/variable8.png">

    <observe>
        <p>És important notar que no es perd el valor d'una variable quan l'assignem a una altra variable.</p>
    </observe>

    <p>Una característica important de les variables és que el seu valor pot canviar.
        No s'ha de tornar a declarar la variable per a canviar-li el valor; únicament
        se li ha d'assignar el nou valor utilitzant l'operador <w>=</w>.
    </p>

    <p>Anem a declarar una variable anomenada <w>diaDeLaSetmana</w> i imprimirem
    el seu valor abans i després de canviar-li'l:</p>
    
    <sc java>
        String diaDeLaSetmana = "Dilluns";
        System.out.println(diaDeLaSetmana); // Dilluns

        diaDeLaSetmana = "Dimarts";
        System.out.println(diaDeLaSetmana); // Dimarts
    </sc>
    

    <p>Hi ha una restricció en les variables: només pots assignar un valor del mateix
        tipus que el tipus inicial de la variable. Així, el següent codi és incorrecte</p>
    <sc java>
        int dia = 10;    // ok
        dia = 11;        // ok
        dia = "Dilluns"; // error! El tipus inicial era int
    </sc>

    <warn>
        <p>Recorda: una variable només pot tenir <strong>un únic valor a la vegada</strong>. 
            És a dir, quan guardem un valor en una variable, el valor que tenia abans es sobreescriu:
        </p>
    
        <sc java>
            int edat = 24;
    
            edat = 25;
        </sc>

        <img src="img/variable9.png">

    </warn>
    <challenge>
        <p>Exercicis:
            <br>
            <a href="https://dmoj.elpuig.xeill.net/problem/assignacions">Assignacions</a>
            <br>
            <a href="https://dmoj.elpuig.xeill.net/problem/completaladeclaracio">Completa la declaració</a>            
        </p>
    </challenge>

    <h3>Formes alternatives de declaració</h3>
    <p>Hi han vàries formes alternatives de declarar variables que són menys 
        utilitzades en la pràctica. Aquí hi han alguns exemples:
    </p>
    <ul>
        <li>
            <p>Declarar vàries variables <strong>del mateix tipus</strong>
            en una única sentència separant-les amb comes <w>,</w></p>
            <sc java>
                String llenguatge = "java", versio = "8 o superior";
            </sc>
        </li>
        <li>
            <p>Separar la declaració i la inicialització:</p>
            <sc java data-line="1,2">
                int edat;   // declaració
                edat = 18;  // inicialització
            </sc>

            <ul>
                <li>
                    <p>A la línia <ln>1</ln>, reservem un espai a la memòria
                        per a guardar un <w>int</w> i l'identifiquem amb <w>edat</w>.
                    </p>
                    <img src="img/memoria3.png">
                </li>
                <li>
                    <p>A <ln>2</ln> estem assignant el valor <w>18</w> en la zona
                    de memòria reservada per a la variable <w>edat</w>.</p>
                    <img src="img/memoria4.png">
                </li>
            </ul>
        </li>
    </ul>

    <h3>Tipus de variables</h3>
    <p>A la documentació oficial d'Oracle pots trobar els
        <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html">
        tipus de dades del llenguatge Java</a>. 
        En aquest curs utilitzarem més sovint els següents:</p>
    <ul>
        <li><w>int</w></li>
        <li><w>float</w></li>
        <li><w>boolean</w></li>
        <li><w>char</w></li>
        <li><w>String</w></li>
    </ul>

    <p>A la següent taula pots veure els valors que permeten guardar aquests tipus de dades:</p>

    <table>
        <thead><th>Tipus</th><th>Valors permesos</th></thead>
        <tr><td><w>int</w></td> <td>un número enter (entre <w>-2_147_483_648</w> i <w>2_147_483_647</w>)</td></tr>
        <tr><td><w>float</w></td><td>número decimal (e.g. <w>123.975f</w>)</td></tr>
        <tr><td><w>boolean</w></td><td>un booleà (<w>true</w> / <w>false</w>)</td></tr>
        <tr><td><w>char</w></td><td>un caracter (entre cometes simples, e.g. <w>'a'</w>)</td></tr>
        <tr><td><w>String</w></td><td>un string (entre cometes dobles, e.g. <w>"java"</w>)</td></tr>
    </table>

    <p>Aquí tens un exemple de declaració d'una variable de cada tipus:</p>

    <sc java>
        int edat = 18;
        float notaMitjana = 8.75f;
        boolean estaMatriculat = true;
        char grup = 'A';
        String email = "alumne@ins.com";
    </sc>

    <h3>Inferència de tipus</h3>
    <p>A partir de Java 10, es pot escriure <w>var</w> en lloc d'un tipus específic
    per a forçar la inferència de tipus basada en el tipus del valor assignat.</p>

    <sc java>
        var nomVariable = inicialització;
    </sc>

    <p>Aquí tens dos exemples:</p>
    <sc java>
        var llenguatge = "java";  // String
        var versio = 10;          // int
    </sc>

    <p>En aquest curs no utilitzarem la inferència de tipus, ja que utilitzarem
        fonamentalment la versió 8 de Java, que de moment segueix sent la més 
        utilitzada.
    </p>

    <quizz>
        <question single>
            <statement>
                <p>Donada la següent declaració d'una variable:</p>
                <sc java>String speed = "high";</sc>
                <p>Quin és el nom de la variable?</p>
            </statement>
            <o correct><m>speed</m></o>
            <o><m>"high"</m></o>
            <o><m>high</m></o>
            <o><m>String</m></o>
        </question>

        <question text>
            <statement>
                <p>Donat el següent codi:</p>
                <sc java>
                    int a = 10;
                    int b = 12;
                    int c = b;
                    int d = a;
                    int e = c;
                </sc>    
                <p>Introdueix el valor de la variable <w>e</w>.</p>
            </statement>

            <o>12</o>    
        </question>

        <question text>
            <statement>
                <p>Escriu el valor de cada variable, després de que s'executi 
                    cada sentència d'aquest programa:
                </p>
            </statement>

            <table>
                <tr> <th style="width: 15ch;"></th>                  <th style="width: 5ch;"><w>a</w></th> <th style="width: 5ch;"><w>b</w></th> <th style="width: 5ch;"><w>c</w></th>  </tr>
                <tr> <td><m>int a = 0;</m></td> <td><o>0</o></td> <td></td>         <td></td></tr>
                <tr> <td><m>int b = 0;</m></td> <td><o>0</o></td> <td><o>0</o></td> <td></td></tr>
                <tr> <td><m>a = 2;</m></td>     <td><o>2</o></td> <td><o>0</o></td> <td></td></tr>
                <tr> <td><m>int c = b;</m></td> <td><o>2</o></td> <td><o>0</o></td> <td><o>0</o></td></tr>
            </table>
        </question>

        <question single>
            <statement>
                <p>Quin és el valor d'aquesta variable?</p>
                <sc java>
                    String animal = "tigre";
                </sc>
            </statement>
            <o><m>"animal"</m></o>
            <o><m>"String"</m></o>
            <o><m>animal</m></o>
            <o correct><m>tigre</m></o>
        </question>

        <question single>
            <statement><p>L'operador d'assignació en Java és:</p></statement>
            <o><w>&lt;-</w></o>
            <o correct><w>=</w></o>
            <o><w>:=</w></o>
            <o><w>-&gt;</w></o>
        </question>

        <question multi>
            <statement><p>Selecciona les afirmacions correctes sobre les variables.</p></statement>
            <o correct>Una variable té un tipus específic</o>
            <o>El tipus determina el nom d'una variable</o>
            <o>No es pot assignar un valor a una variable</o>
            <o correct>Es pot llegir el valor d'una variable</o>
        </question>

        <question text>
            <statement><p>Quantes variables s'han declarat al següent codi?</p>
                <sc java>
                    int i = 0, j = 0, k = 0;
                    String s = "s", str = "str";
                </sc>
                <o>5</o>
            </statement>
        </question>

        <question multi>
            <statement><p>Selecciona les declaracions vàlides</p></statement>
            <o><w>float aFloat = "23.75f";</w></o>
            <o correct><w java>String mFloat = "98.7";</w></o>
            <o><w>int cFloat = 44.3;</w></o>
            <o><w>String kFloat = float;</w></o>
            <o correct><w>char dFloat = '.';</w></o>
            <o correct><w>String tFloat = "float";</w></o>
        </question>

        <question single>
            <statement>
                <p>El següent codi:</p>
                <sc java>
                    boolean turnedOn = true;
                    turnedOn = false;
                    String turnedOff = turnedOn;
                    System.out.println(turnedOff);
                </sc>
            </statement>
            <o>Imprimeix&nbsp;<m>false</m></o>
            <o>Imprimeix&nbsp;<m>true</m></o>
            <o>S'executa però dona un error</o>
            <o correct>No es pot executar</o>

        </question>
    </quizz>

    <challenge>
        <p>Resol aquests problemes:</p>
        <p>
            <a href="https://dmoj.elpuig.xeill.net/problem/tipuscorrectes">Tipus correctes</a>
            <br>
            <a href="https://dmoj.elpuig.xeill.net/problem/valorscorrectes">Valors correctes</a>
            <br>
            <a href="https://dmoj.elpuig.xeill.net/problem/nomscorrectes">Noms correctes</a>
        </p>
        
    </challenge>
</section>

<section>
    <h2>Anomenar variables</h2>

    <h3>Per què el nom és important?</h3>
    <p>Com ja saps, cada variable té un nom que l'identifica de forma única respecte a les
        altres variables. Donar un bon nom a una variable potser no és tan simple com sembla.
        Els programadors amb experiència posen molt de compte en posar els noms per a fer els 
        seus programes més fàcils de comprendre. És molt important perquè els programadors
        dediquen molt de temps a llegir i comprendre programes escrits per altres programadors.
        Si les variables tenen noms dolents, inclús el teu propi codi et semblarà poc clar en uns
        pocs mesos.
    </p>
    <p>Sempre tracta de ser descriptiu i concís al posar nom a les variables. A la llarga 
        ho agrairàs.
    </p>

    <p>A més a més, per a posar noms has de seguir les regles i les convencions.</p>



    <h3>Regles per a anomenar variables</h3>
    <p>Les regles de Java per als noms de variables són:</p>
    <ul>
        <li>distingeix majúscules i minúscules</li>
        <li>pot incloure lletres Unicode, digits, i els caracters <w>$</w> &nbsp; <w>_</w></li>
        <li>no pot començar per un dígit</li>
        <li>no pot ser una paraula-clau (<w>class</w>, <w>static</w>, <w>void</w>, <w>int</w>, són il·legals)</li>
    </ul>
    <p>En base a aquestes regles, pots concloure que els espais en blanc no estan permesos en el nom
        d'una variable.
    </p>

    <warn>
        <p>Si trenques alguna d'aquestes regles el teu programa no funcionarà</p>
    </warn>

    <p>Aquí tens alguns exemples de noms vàlids:</p>
    <sc java>
        numero, $ident, bigValue, _val, abc, k
    </sc>

    <p>Aquests són invàlids:</p>
    <sc java>
        @ab, 1c, !ab, class
    </sc>



    <h3>Convencions per a anomenar variables</h3>
    <p>També hi ha una sèrie de convencions per a anomenar variables en Java:</p>
    <ul>
        <li>si el nom de la variable és una única paraula, s'escriu en minúscula (e.g. 
            <w>numero</w>, <w>preu</w>)
        </li>
        <li>si el nom de la variable inclou vàries paraules, s'han d'escriure en 
            <w>lowerCamelCase</w>, això és, la primera paraula ha de ser en minúscula i la resta 
            han de tenir la primera lletra en majúscula (e.g. <w>numeroDeMonedes</w>)
        </li>
        <li>no han de començar per <w>$</w> ni per <w>_</w>, encara que estigui permés</li>
        <li>escull noms amb significat, e.g <w>punts</w> té més sentit que <w>p</w>, tot i 
            que els dos són vàlids.</li>
    </ul>

    <p>Aquestes convencions són opcionals, tot i que es recomana seguir-les. Com hem dit 
        al principi, aquestes convencions faran el teu programa més legible per a tu i per
        als altres programadors Java.
    </p>

    <quizz>
        <question single>
            <statement><p>Vols declarar una variable anomenada <w>int</w>.</p>
            <p>Determina si el nom es vàlid o no (i per què?). Un nom és valid si el programa funcionarà.</p>
            </statement>

            <o>Es nom és vàlid</o>
            <o>El nom no és vàlid perquè no té sentit (què és int?)</o>
            <o>El nom no és vàlid perquè comença per una lletra</o>
            <o correct>El nom no és vàlid perquè és una paraula-clau</o>
        </question>

        <question multi>
            <statement><p>Selecciona els noms de variable vàlids, és a dir, que el programa funcionarà.</p></statement>
            <o>1poma</o>
            <o correct>numero1</o>
            <o>boolean</o>
            <o correct>_var</o>
        </question>

        <question text>
            <statement>
                <p>Recordes les convencions per anomenar variables? Fes que la variable
                    <w>ALTURA@CACTUS</w> no solament sigui sintàcticament correcta, sinò
                    que també compleixi les recomanacions.
                </p>
            </statement>
            <o>alturaCactus</o>
        </question>

        <question single>
            <statement>
                <p>Quin és el millor nom per una variable d'acord amb les convencions?</p>
            </statement>
            <o><m>_uha</m></o>
            <o correct><m>userHomeAdress</m></o>
            <o><m>userhomeaddress</m></o>
            <o><m>user_home_address</m></o>
            <o><m>UserHomeAddress</m></o>
        </question>
    </quizz>
</section>
