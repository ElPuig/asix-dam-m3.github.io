
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Activity</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="activity"
                  title="Activity"
                  environment="web"
                  feedback-link="https://github.com/gerardfp">
    
      <google-codelab-step label="Introducció" duration="0">
        <p>El objetivo de esta práctica es aprender a iniciar Activities. También aprenderás cómo pasar información de una <code>Activity</code> a otra.</p>
<p>Desarrollarás una aplicación que muestra una Activity con un campo de texto y un botón. En el campo de texto se pedirá el nombre de una persona. Cuando se pulse el botón, el nombre introducido se mostrará en otra Activity, a modo de saludo.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Crea el proyecto" duration="0">
        <p>Selecciona &#34;Empty Activity&#34; como plantilla para la MainActivity.</p>
<p class="image-container"><img style="width: 403.00px" src="img\8eaeb22d21ad800a.png"></p>
<p>Introduce los siguientes datos de configuración del proyecto.</p>
<p class="image-container"><img style="width: 736.00px" src="img\c0418eb503dfad0f.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Activity principal" duration="0">
        <p>La Activity Principal contendrá un botón con el texto &#34;Iniciar Registro&#34;, que nos llevará a la siguiente pantalla, la que pedirá los datos personales.</p>
<p>En primer lugar añadiremos el <code>Button</code> en el <em>layout</em> de la <code>MainActivity</code>. (Más adelante haremos que que al hacer click en dicho botón se inicie la siguiente Activity).</p>
<h2 is-upgraded>Añadir un Button al Layout de la MainActivity</h2>
<p>Abre el archivo <code>activity_main.xml</code>, que se encuentra en el directorio  <code>res/layout/</code></p>
<p><img style="width: 736.40px" src="img\e21934e487b522d.png"><br><br>Este archivo XML define el <em>layout </em>de la activity. Por defecto, contiene el <code>TextView</code> &#34;Hello World&#34;.<br></p>
<aside class="special"><p>Para definir un <em>layout</em>, Android Studio proporciona un modo gráfico (<strong>Design</strong>) y otro en XML (<strong>Text</strong>). Para esta lección, se trabaja directamente con el XML, por lo que debes seleccionar la pestaña <strong>Text</strong>.</p>
</aside>
<p>Reemplaza el contenido del archivo XML con lo siguiente:<br></p>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   xmlns:tools=&#34;http://schemas.android.com/tools&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   tools:context=&#34;.MainActivity&#34;&gt;

   &lt;Button
       android:id=&#34;@+id/button&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:text=&#34;Button&#34;
       app:layout_constraintBottom_toBottomOf=&#34;parent&#34;
       app:layout_constraintLeft_toLeftOf=&#34;parent&#34;
       app:layout_constraintRight_toRightOf=&#34;parent&#34;
       app:layout_constraintTop_toTopOf=&#34;parent&#34; /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre>
<h2 is-upgraded>Hemos reemplazado el <code>TextView</code> que viene por defecto con un <code>Button</code>.</h2>
<p>Si cambias a la pestaña <strong>Design</strong>, deberías ver una previsualización del <em>layout </em>como ésta:</p>
<p class="image-container"><img style="width: 557.00px" src="img\62695f6505d33ddf.png"></p>
<p>Cambiemos el texto que aparece en el botón por el de &#34;INICIAR REGISTRO&#34;. Para ello solamente debes modificar el atributo <code>android:text</code> (en el XML o en Diseño).</p>
<p>Si bien, es una buena práctica añadir todas las cadenas de texto que tenga nuestra aplicación en el fichero de recursos <code>strings.xml</code> (para facilitar las traducciones, por ejemplo).</p>
<p>Para hacerlo podemos hacer uso del <em>refactoring </em>de IntelliJ. Tan simple como hacer <code>Alt + Intro</code>:</p>
<p class="image-container"><img style="width: 584.00px" src="img\d85a96ad0984d886.gif"></p>
<p>Solamente hay que darle un nombre al recurso y automáticamente se creará la definición de este recurso en el archivo <code>strings.xml</code>:</p>
<p class="image-container"><img style="width: 736.40px" src="img\b684762f69d53d5a.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Iniciar otra Activity" duration="0">
        <p>Por ahora únicamente tenemos una aplicación que muestra una Activity (una sola pantalla) con un botón. </p>
<p>Vamos a añadir algo de código en <code>MainActivity</code> para que se inicie una nueva <em>activity</em> cuando el usuario haga clic en el botón &#34;INICIAR REGISTRO&#34;.</p>
<h2 is-upgraded>Responder al botón INICIAR_REGISTRO</h2>
<p>El comportamiento de una Activity se programa en el archivo JAVA de dicha Activity. Para hacer que el botón de la <code>MainActivity</code> haga algo, debemos añadir el código Java en el archivo <code>MainActivity.java</code>.</p>
<p>Abre el archivo <code>MainActivity.java</code>:</p>
<p class="image-container"><img style="width: 680.00px" src="img\349dca1107298a0c.png"></p>
<aside class="special"><p>El método <code>onCreate()</code> de una Activity es ejecutado por el Sistema Android cuando se inicia una Activity. En este método definiremos qué debe hacer una Activity cuando se inicia.</p>
</aside>
<p>Lo que haremos cuando se inicie la MainActivity,, es &#34;<em>activar</em>&#34; el botón de forma que cuando se haga clic en él, nos lleve a la siguiente activity. Es decir, cuando se inicie la MainActivity haremos que se establezca la acción a realizar <strong>cuando se haga clic en el botón</strong>.</p>
<p>Para añadir un comportamiento mediante código Java a un elemento definido en el layout XML (com en este caso, el botón), el primer paso es &#34;recuperar&#34; el elemento. Para ello usaremos el método <code>findViewById()</code>.</p>
<ol type="1" start="1">
<li><h3 is-upgraded>Recuperar el botón con findViewById():</h3>
</li>
</ol>
<p class="image-container"><img style="width: 584.00px" src="img\374ab53b411ee017.gif"></p>
<p>En este código hemos usado el método <code>findViewById()</code>, al cuál le hemos pasado el identificador del botón que habíamos indicado en el XML, y hemos guardado el botón en la variable <code>botonIniciarRegistro</code>. </p>
<p>De esta forma, la variable <code>botonIniciarRegistro</code> hace referencia al botón con el id <code>button</code> del layout <code>activity_main.xml</code></p>
<p class="image-container"><img style="width: 736.40px" src="img\30564e2a055842d4.png"></p>
<aside class="special"><p>Observa que para definir un <code>id</code> en un elemento del <em>layout</em>, hay que añadir el atributo <code>android:id</code> y escribir <code>@+id/</code> antes del nombre identificador.</p>
</aside>
<p>En este caso en el que solo hay un botón, no importa demasiado el identificador que se le asigne, pero a medida que una aplicación va creciendo es importante asignar identificadores que &#34;<strong>de verdad&#34;</strong> identifiquen al elemento.</p>
<p>Para cambiar el id de un elemento, utiliza la refactorización:</p>
<p>Pongámosle un identificador más adecuado al botón. Sitúate encima del identificador y presiona <code>SHIFT + F6</code> (o ve a <code>Refactor</code> &gt; <code>Rename</code>):</p>
<p class="image-container"><img style="width: 736.40px" src="img\6f2ea4df68d78424.gif"></p>
<ol type="1" start="2">
<li><h3 is-upgraded>Añadir un Listener al bóton:</h3>
</li>
</ol>
<p>Una vez tenemos la referencia al botón, podemos especificar la acción que se debe realizar al hacer click sobre él. Esto se hace mediante <em>listeners</em>. (Más adelante veremos con profundidad los <em>listeners</em>).</p>
<p>Para añadir un <em>listener </em>a un botón que responda al click usamos el método <code>setOnClickListener()</code>, al cuál le pasaremos un objeto <code>View.OnClickListener</code>. En este objeto estará definido el método que se ejecutará cuando el usuario haga click en el botón:</p>
<p class="image-container"><img style="width: 736.40px" src="img\8b60a966b232b8fd.gif"></p>
<p>De esta forma hemos añadido un <code>OnClickListener</code> al botón. Lo que programemos dentro del método <code>onClick()</code> de este listener se ejecutará cuando se haga click en el botón.</p>
<h2 is-upgraded>Construir un Intent</h2>
<p><br>Para iniciar otra <em>Activity</em>, se usa un objeto de la clase <code>Intent</code>.</p>
<p>Hay que crear un objeto de esta clase especificando la Activity que queremos iniciar, y luego pasarle el objeto Intent al método <code>startActivity()</code>.</p>
<ol type="1" start="1">
<li>Construir el Intent:</li>
</ol>
<p class="image-container"><img style="width: 736.40px" src="img\a4aa7696541f3265.gif"></p>
<ol type="1" start="2">
<li>Llamar al método <code>startActivity()</code> y pasarle el intent:</li>
</ol>
<p class="image-container"><img style="width: 736.40px" src="img\e65af59ebed1a570.gif"></p>
<aside class="warning"><p><strong>Nota:</strong> La referencia al <code>RegisterActivity</code> generará un error en Android Studio debido a que la clase no existe todavía. Ignorar el error por el momento; ya que va a crear la clase pronto.</p>
</aside>
<p>El método <a href="https://developer.android.com/reference/android/app/Activity.html#startActivity(android.content.Intent)" target="_blank"><code>startActivity()</code></a> inicia una instancia de la clase <code>RegisterActivity</code> , especificada por el <a href="https://developer.android.com/reference/android/content/Intent.html" target="_blank"><code>Intent</code></a>. Ahora tienes que crear esta clase.</p>
<p>Hemos hecho en dos pasos la acción de abrir una Activity. Primero hemos creado el Intent, y después se lo hemos pasado a startActivity(). Se podría haber hecho en una sola línea así:</p>
<pre><code>startActivity(new Intent(MainActivity.this, RegisterActivity.class));</code></pre>
<h2 is-upgraded>Crear la segunda actividad</h2>
<ol type="1" start="1">
<li>En la ventana del <strong>Proyecto</strong>, haz clic en la carpeta de la <strong><code>app</code></strong><strong> </strong>y selecciona <strong><code>New</code></strong><strong> &gt; </strong><strong><code>Activity</code></strong><strong> &gt; </strong><strong><code>Empty Activity</code></strong>.</li>
<li>En la ventana <strong>Configurar Actividad</strong>, escribe <code>RegisterActivity</code> para el <strong>Nombre de Actividad </strong>y haz clic en<strong> Finalizar<br></strong></li>
</ol>
<p class="image-container"><img style="width: 736.40px" src="img\3cefaa9fcc2c4b13.gif"></p>
<p>Cuando creas una Activity de esta manera, Android Studio automáticamente hace tres cosas:<br></p>
<ul>
<li>Crea la clase <code>RegisterActivity.java</code> con la implementación requerida del método <a href="https://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)" target="_blank"><code>onCreate()</code></a>.<br></li>
<li>Crea el archivo de layout <code>activity_register.xml<br></code></li>
<li>Agrega el elemento <a href="https://developer.android.com/guide/topics/manifest/activity-element.html" target="_blank"><code>&lt;</code><code>A</code><code>ctivi</code><code>ty</code><code>&gt;</code></a> requerido en <code>AndroidManifest.xml</code>.</li>
</ul>
<p><br>Si ejecutas la aplicación y haces clic en el botón Enviar de la primera actividad, la segunda actividad se inicia, pero está vacía. Esto es porque la segunda actividad utiliza un <code>Layout</code> vacío predeterminado proporcionado por la plantilla.</p>
<p class="image-container"><img style="width: 256.00px" src="img\d0ec5bf6900b1620.gif"></p>


      </google-codelab-step>
    
      <google-codelab-step label="RegisterActivity" duration="0">
        <p>Ahora modificaremos la segunda actividad para añadir el formulario de registro.</p>
<p>A modo de ejemplo pediremos el nombre, email, telefono y password.</p>
<h2 is-upgraded>Definir el Layout con los campos de registro</h2>
<p>Abre el archivo de layout de la RegisterActivity, <code>activity_register.xml</code>.</p>
<p>Agrega los campos de texto al layout.</p>
<p>Si lo haces en modo Diseño, agrega un PlainText, un E-mail, un Phone y un Password. Y también un botón que ponga &#34;REGISTRAR&#34;. <strong>Recuerda poner unos identificadores adecuados a cada elemento</strong>.</p>
<p>Si lo haces en modo Texto, simplemente copia y pega este codigo XML:</p>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   android:orientation=&#34;vertical&#34;&gt;

   &lt;EditText
       android:id=&#34;@+id/userName&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:inputType=&#34;textPersonName&#34;
       android:hint=&#34;Name&#34; /&gt;

   &lt;EditText
       android:id=&#34;@+id/userEmail&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:inputType=&#34;textEmailAddress&#34;
       android:hint=&#34;Email&#34;/&gt;

   &lt;EditText
       android:id=&#34;@+id/userPhone&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:inputType=&#34;phone&#34;
       android:hint=&#34;Phone&#34;/&gt;

   &lt;EditText
       android:id=&#34;@+id/userPassword&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:inputType=&#34;textPassword&#34;
       android:hint=&#34;Password&#34;/&gt;
  
   &lt;Button
       android:id=&#34;@+id/botonRegistrar&#34;
       android:text=&#34;REGISTRAR&#34;
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;/&gt;
  
&lt;/LinearLayout&gt;</code></pre>
<p>Hemos añadido 4 campos de texto y un botón. Todos ellos los hemos puesto dentro de un LinearLayout. </p>
<p>Veamos algunos de los atributos:</p>
<p>LinearLayout</p>
<ul>
<li>android:orientation=&#34;vertical&#34; hace que los elementos que estan dentro del layout se dispongan uno debajo de otro.</li>
</ul>
<p>EditText</p>
<ul>
<li><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong> hace que </li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
