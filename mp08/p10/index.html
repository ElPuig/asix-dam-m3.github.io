
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Navigation</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="mp08/p10"
                  title="Navigation"
                  environment="web"
                  feedback-link="https://github.com/gerardfp">
    
      <google-codelab-step label="Introducción" duration="0">
        

      </google-codelab-step>
    
      <google-codelab-step label="Crea el proyecto (Opcion A)" duration="0">
        <p>Selecciona &#34;<strong>Navigation Drawer Activity</strong>&#34; como plantilla para la MainActivity</p>
<p class="image-container"><img style="width: 215.00px" src="img\6f4ccd6d355335b6.png"></p>
<h2 is-upgraded>Elimina el código de ejemplo que se crea con la plantilla</h2>
<p>Al crear la MainActivity con la plantilla &#34;<strong>Navigation Drawer Activity</strong>&#34; se crean una serie de fragments de ejemplo (<em>home, gallery, send, share, slideshow, tools,</em> ...). Eliminemos todo ese codigo:</p>
<ol type="1" start="1">
<li>Elimina el pakage <code>ui</code>:<br><br><img style="width: 344.00px" src="img\1d152174d9fa6987.gif"><br><br><br></li>
<li>Elimina el layout de los fragments:<br><br><img style="width: 344.00px" src="img\6ea0896b7b0821ac.gif"><br><br><br></li>
<li>Elimina los ítems del menú:<br><br><img style="width: 724.00px" src="img\c6479bdde482ef11.gif"><br><br><br></li>
<li>Borra el grafo de navegación:<br><br><img style="width: 736.40px" src="img\bc81b698aaf1a205.gif"></li>
<li>Borra los strings de los títulos de los fragments:<br><br><img style="width: 736.40px" src="img\944a63920e71ebcf.gif"></li>
<li>Borra las &#34;top level destinations&#34; del archivo <code>MainActivity.java</code>:<br></li>
</ol>
<p class="image-container"><img style="width: 736.40px" src="img\c4de28b92b5573a7.gif"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Crea el proyecto (Opcion B)" duration="0">
        <p>Selecciona &#34;<strong>Empty Activity</strong>&#34; como plantilla para la MainActivity</p>
<p>Añade las dependencias para incluir el soporte Navigation</p>
<pre><code>dependencies {
implementation &#39;com.google.android.material:material:1.0.0&#39;

implementation &#39;androidx.navigation:navigation-fragment:2.1.0&#39;
implementation &#39;androidx.navigation:navigation-ui:2.1.0&#39;
}</code></pre>
<ol type="1" start="1">
<li>Crea el grafo de navegacion (llámale <code>mobile_navigation</code>)<br><br><img style="width: 491.00px" src="img\7f96e4e9f9bae8b1.png"></li>
<li>Crea el archivo de menu para el Drawer (<code>activity_main_drawer</code>)<br><br><img style="width: 491.00px" src="img\4b38af517059db97.png"><br></li>
<li>Crea el archivo de menu para el OptionsMenu (<code>main</code>)<br><br><img style="width: 491.00px" src="img\78146bb55c6b712c.png"><br></li>
<li>Crea el archivo de layout para la cabecera del Drawer (<code>nav_header_main</code>)<br><br><img style="width: 491.00px" src="img\868e7bfc55976865.png"><br></li>
<li>Añade los siguientes estilos al fichero <code>res/values/styles.xml</code>:<br></li>
</ol>
<pre><code>&lt;style name=&#34;AppTheme.NoActionBar&#34;&gt;
   &lt;item name=&#34;windowActionBar&#34;&gt;false&lt;/item&gt;
   &lt;item name=&#34;windowNoTitle&#34;&gt;true&lt;/item&gt;
&lt;/style&gt;

&lt;style name=&#34;AppTheme.AppBarOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Dark.ActionBar&#34; /&gt;

&lt;style name=&#34;AppTheme.PopupOverlay&#34; parent=&#34;ThemeOverlay.AppCompat.Light&#34; /&gt;</code></pre>
<ol type="1" start="6">
<li>Añade el siguiente atributo a la <em>MainActivity</em> en el fichero <code>AndroidManifest.xml</code>:<br></li>
</ol>
<pre><code>android:theme=&#34;@style/AppTheme.NoActionBar&#34;</code></pre>
<p><br>Debe quedar algo así:<br></p>
<pre><code>&lt;activity
   android:name=&#34;.MainActivity&#34;
   android:theme=&#34;@style/AppTheme.NoActionBar&#34;&gt;
   &lt;intent-filter&gt;
       &lt;action android:name=&#34;android.intent.action.MAIN&#34; /&gt;

       &lt;category android:name=&#34;android.intent.category.LAUNCHER&#34; /&gt;
   &lt;/intent-filter&gt;
&lt;/activity&gt;</code></pre>
<ol type="1" start="7">
<li>Modifica el archivo de layout de la MainActivity (<code>activity_main.xml</code>) para añadir la Toolbar, el Drawer (NavigationView) y el NavHost:<br><br></li>
</ol>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   xmlns:tools=&#34;http://schemas.android.com/tools&#34;
   android:id=&#34;@+id/drawer_layout&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   android:fitsSystemWindows=&#34;true&#34;
   tools:openDrawer=&#34;start&#34;&gt;

   &lt;androidx.coordinatorlayout.widget.CoordinatorLayout
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;match_parent&#34;
       tools:context=&#34;.MainActivity&#34;&gt;

       &lt;com.google.android.material.appbar.AppBarLayout
           android:layout_width=&#34;match_parent&#34;
           android:layout_height=&#34;wrap_content&#34;
           android:theme=&#34;@style/AppTheme.AppBarOverlay&#34;&gt;

           &lt;androidx.appcompat.widget.Toolbar
               android:id=&#34;@+id/toolbar&#34;
               android:layout_width=&#34;match_parent&#34;
               android:layout_height=&#34;?attr/actionBarSize&#34;
               android:background=&#34;?attr/colorPrimary&#34;
               app:popupTheme=&#34;@style/AppTheme.PopupOverlay&#34; /&gt;
       &lt;/com.google.android.material.appbar.AppBarLayout&gt;

       &lt;androidx.constraintlayout.widget.ConstraintLayout
           android:layout_width=&#34;match_parent&#34;
           android:layout_height=&#34;match_parent&#34;
           app:layout_behavior=&#34;@string/appbar_scrolling_view_behavior&#34;&gt;

           &lt;fragment
               android:id=&#34;@+id/nav_host_fragment&#34;
               android:name=&#34;androidx.navigation.fragment.NavHostFragment&#34;
               android:layout_width=&#34;match_parent&#34;
               android:layout_height=&#34;match_parent&#34;
               app:defaultNavHost=&#34;true&#34;
               app:layout_constraintLeft_toLeftOf=&#34;parent&#34;
               app:layout_constraintRight_toRightOf=&#34;parent&#34;
               app:layout_constraintTop_toTopOf=&#34;parent&#34;
               app:navGraph=&#34;@navigation/mobile_navigation&#34; /&gt;

       &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

   &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;

   &lt;com.google.android.material.navigation.NavigationView
       android:id=&#34;@+id/nav_view&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;match_parent&#34;
       android:layout_gravity=&#34;start&#34;
       android:fitsSystemWindows=&#34;true&#34;
       app:headerLayout=&#34;@layout/nav_header_main&#34;
       app:menu=&#34;@menu/activity_main_drawer&#34; /&gt;

&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;</code></pre>
<ol type="1" start="8">
<li>Añade el siguiente código a la <code>MainActivity.java</code> para configurar la Toolbar y el Drawer (NavigationView):<br></li>
</ol>
<pre><code>import android.os.Bundle;
import android.view.Menu;

import com.google.android.material.navigation.NavigationView;

import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.drawerlayout.widget.DrawerLayout;
import androidx.navigation.NavController;
import androidx.navigation.Navigation;
import androidx.navigation.ui.AppBarConfiguration;
import androidx.navigation.ui.NavigationUI;

public class MainActivity extends AppCompatActivity {

   private AppBarConfiguration mAppBarConfiguration;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       Toolbar toolbar = findViewById(R.id.toolbar);
       setSupportActionBar(toolbar);

       DrawerLayout drawer = findViewById(R.id.drawer_layout);
       NavigationView navigationView = findViewById(R.id.nav_view);

       mAppBarConfiguration = new AppBarConfiguration.Builder()
               .setDrawerLayout(drawer)
               .build();
       NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
       NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);
       NavigationUI.setupWithNavController(navigationView, navController);
   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
       getMenuInflater().inflate(R.menu.main, menu);
       return true;
   }

   @Override
   public boolean onSupportNavigateUp() {
       NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
       return NavigationUI.navigateUp(navController, mAppBarConfiguration)
               || super.onSupportNavigateUp();
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Diseña el grafo de navegacion" duration="0">
        <p>Añadiremos tres Destinaciones (Fragments) .</p>
<ol type="1" start="1">
<li>Añade las destinaciones al grafo de navegacion <code>mobile_navigation.xml</code>:</li>
</ol>
<p>Llama a estas destinaciones: <code>Drawer1Fragment</code>, <code>Drawer2Fragment</code>, <code>Drawer3Fragment</code></p>
<p class="image-container"><img style="width: 404.00px" src="img\3c20536e3c3f493a.png"></p>
<p class="image-container"><img style="width: 480.00px" src="img\adff306b2f32b82f.png"></p>
<p class="image-container"><img style="width: 710.00px" src="img\9ecc1b720f3e6bfc.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="NavigationView (Drawer)" duration="0">
        <p>Haremos que las tres destinaciones (fragments) que hemos creado, sean accesibles desde el <code>NavigationView</code> (<em>Drawer</em>)</p>
<ol type="1" start="1">
<li>Añade los items al menu del drawer <code>activity_main_drawer.xml</code>:<br></li>
</ol>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;menu xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt;

   &lt;item
       android:id=&#34;@+id/drawer1Fragment&#34;
       android:title=&#34;Drawer 1&#34; /&gt;

   &lt;item
       android:id=&#34;@+id/drawer2Fragment&#34;
       android:title=&#34;Drawer 2&#34; /&gt;

   &lt;item
       android:id=&#34;@+id/drawer3Fragment&#34;
       android:title=&#34;Drawer 3&#34; /&gt;
&lt;/menu&gt;</code></pre>
<aside class="warning"><p>Los <code>id</code> de los items del menu tienen que coincidir con el <code>id</code> de las destinaciones</p>
</aside>
<ol type="1" start="2">
<li>En el archivo <code>MainActivity.java</code>, establece en la configuracion de la AppBar las destinaciones que serán &#34;Top Level&#34;:<br></li>
</ol>
<pre><code>mAppBarConfiguration = new AppBarConfiguration.Builder(
       R.id.drawer1Fragment, R.id.drawer2Fragment
)
       .setDrawerLayout(drawer)
       .build();</code></pre>
<aside class="special"><p>En las destinaciones Top Level se mostrará el icono de acceso al menu <img style="width: 32.00px" src="img\989c818bc03fa169.png"> en la AppBar</p>
<p>En las que no sean top level, se mostrará la flecha de volver <img style="width: 29.00px" src="img\b14ddb68d8c22b13.png"></p>
</aside>
<ol type="1" start="3">
<li>Opcionalmente <strong>diseña </strong>una cabecera para el Drawer (<code>nav_header_main.xml</code>):<br></li>
</ol>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:gravity=&#34;center&#34;
   android:orientation=&#34;vertical&#34;&gt;

   &lt;ImageView
       android:id=&#34;@+id/imageView&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:paddingTop=&#34;48dp&#34;
       app:srcCompat=&#34;@mipmap/ic_launcher_round&#34; /&gt;

   &lt;TextView
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:paddingTop=&#34;8dp&#34;
       android:text=&#34;Android is&#34; /&gt;

   &lt;TextView
       android:id=&#34;@+id/textView&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:textSize=&#34;24sp&#34;
       android:textStyle=&#34;bold&#34;
       android:text=&#34;HARD&#34; /&gt;

&lt;/LinearLayout&gt;</code></pre>
<p>Debería quedar esta app:</p>
<p class="image-container"><img style="width: 239.00px" src="img\a11a4c65c0407e84.gif"></p>
<aside class="special"><p>Observa cómo en destinacion <code>drawer3Fragment</code> se muestra la flecha de volver <img style="width: 29.00px" src="img\b14ddb68d8c22b13.png">, ya que no la hemos puesto como Top Level Destination.</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="BottomNavigationView" duration="0">
        

      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
