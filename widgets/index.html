
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Widgets</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="widgets"
                  title="Widgets"
                  environment="web"
                  feedback-link="/dam-m8">
    
      <google-codelab-step label="Introducción" duration="0">
        <p>El objetivo de esta práctica es introducir el uso de diferentes <strong>Widgets</strong> de Interfaz de Usuario.</p>
<p>Realizaremos una App que incorpore diversos Widgets. El estado de cada Widget se guardará en el fichero <code>SharedPreferences</code>, y se restaurará al iniciar la Aplicación.</p>
<p class="image-container"><img style="width: 312.00px" src="img/8999ab70f1efb686.gif"></p>
<p>Aquí el código completo de la app: <a href="https://github.com/gerardfp/P4" target="_blank">https://github.com/gerardfp/P4</a></p>
<h2 is-upgraded>View y ViewGroup</h2>
<p>La clase <code>View</code> es el bloque de construcción básico para los componentes de Interfaz de Usuario. Una <code>View</code> ocupa un area rectangular en la pantalla y es responsable del dibujado y del manejo de eventos. <code>View</code> es la clase base para los widgets, los cuales se usan para crear componentes de Interfaz de Usuario interactivos (Button, EditText, TextView, etc.). La subclase <code>ViewGroup</code> es la clase base para <em>layouts</em> (ConstraintLayout, LinearLayout, FrameLayout, etc.) que son contenedores invisibles que sustentan otras Views (o otros ViewGroups) y definen sus propiedades de disposición.</p>
<p class="image-container"><img style="width: 312.00px" src="img/7f6032924d93ff70.png"></p>
<p>Actualmente existen un total de 139 subclases (directas e indirectas) de <a href="https://developer.android.com/reference/android/view/View.html" target="_blank"><code>View</code></a>. Veremos las siguientes:</p>
<ul>
<li>ToggleButton</li>
<li>Switch</li>
<li>CheckBox</li>
<li>CheckedTextView</li>
<li>RadioButton</li>
<li>Spinner</li>
<li>ProgressBar</li>
<li>SeekBar</li>
<li>RatingBar</li>
<li>TimePicker</li>
<li>DatePicker</li>
<li>CalendarView</li>
<li>NumberPicker</li>
</ul>
<h2 is-upgraded>Widgets</h2>
<p>Cada widget incorpora una serie de atributos XML y métodos Java para poder configurarlo y interactuar con él. Estos atributos y métodos varian según el widget y según la version del SDK que use nuestra aplicación.</p>
<p>Encontrarás todos los métodos y atributos de todos Widget en la referencia de Android: <a href="https://developer.android.com/reference/android/widget/package-summary" target="_blank">https://developer.android.com/reference/android/widget/package-summary</a></p>
<p>Selecciona la versión de la API que quieres consultar. Para esta práctica usaremos la versión 26. Seleccionala en el desplegable:</p>
<p class="image-container"><img style="width: 361.00px" src="img/bd66e48ec217057f.png"></p>
<p>También tendrás que cambiar la configuración del proyecto en el archivo <code>build.gradle (Module:app)</code>.</p>
<pre><code>minSdkVersion 26</code></pre>
<h2 is-upgraded>Layout de la Aplicación</h2>
<p>Usaremos el siguiente <em>layout </em>como base:</p>
<pre><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;
   xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;
   xmlns:tools=&#34;http://schemas.android.com/tools&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;&gt;

   &lt;ScrollView
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;match_parent&#34;&gt;
       &lt;LinearLayout
           android:layout_width=&#34;match_parent&#34;
           android:layout_height=&#34;match_parent&#34;
           android:orientation=&#34;vertical&#34;&gt;

           &lt;!--Widgets--&gt;

       &lt;/LinearLayout&gt;
   &lt;/ScrollView&gt;
&lt;/LinearLayout&gt;</code></pre>
<p>Incluiremos cada Widget dentro de un <code>CardView</code></p>
<pre><code>&lt;androidx.cardview.widget.CardView
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   app:cardUseCompatPadding=&#34;true&#34;&gt;
   &lt;LinearLayout
       android:layout_width=&#34;match_parent&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:orientation=&#34;vertical&#34;
       android:padding=&#34;16dp&#34;&gt;
       &lt;TextView
           android:text=&#34;Nombre del Widget&#34;
           android:gravity=&#34;center&#34;
           android:textSize=&#34;24sp&#34;
           android:layout_width=&#34;match_parent&#34;
           android:layout_height=&#34;wrap_content&#34;/&gt;

       &lt;!--&lt;Widget/&gt;--&gt;

   &lt;/LinearLayout&gt;
&lt;/androidx.cardview.widget.CardView&gt;</code></pre>
<p>Necesitarás incluir la dependencia de la librería <code>CardView</code> en el archivo <code>build.gradle (Module:app)</code>. </p>
<pre><code>dependencies {
   implementation &#39;androidx.cardview:cardview:1.0.0&#39;
}</code></pre>
<h2 is-upgraded>MainActivity</h2>
<p>En la MainActivity inicializaremos las <code>SharedPreferences</code> guardándolas en la variable <code>prefs</code> por comodidad.</p>
<p>También habrá que definir las variables para cada Widget y inicializarlas con <code>findViewById()</code>.</p>
<pre><code>public class MainActivity extends AppCompatActivity {

   SharedPreferences prefs;

   ToggleButton toggleButton;
   // resto de widgets

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       prefs = getPreferences(MODE_PRIVATE);

       toggleButton = findViewById(R.id.toogleButton);
       // resto de widgets
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="ToggleButton" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/ToggleButton" target="_blank">https://developer.android.com/reference/android/widget/ToggleButton</a></p>
<pre><code>&lt;ToggleButton
   android:id=&#34;@+id/toggleButton&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;/&gt;</code></pre>
<pre><code>toggleButton.setChecked(prefs.getBoolean(&#34;TOGGLEBUTTON&#34;, false));
        
toggleButton.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
         prefs.edit().putBoolean(&#34;TOGGLEBUTTON&#34;, b).apply();
    }
});</code></pre>
<p>El parámetro <code>b</code> del callback <code>onCheckedChanged</code> indica si el ToggleButton está activado o no.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Switch" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/Switch" target="_blank">https://developer.android.com/reference/android/widget/Switch</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/b8a55d23469f049b.gif"></p>
<pre><code>&lt;Switch
   android:id=&#34;@+id/aSwitch&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;/&gt;</code></pre>
<pre><code>aSwitch.setChecked(prefs.getBoolean(&#34;SWITCH&#34;, false));

aSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
        prefs.edit().putBoolean(&#34;SWITCH&#34;, b).apply();
    }
});</code></pre>
<p>El parámetro <code>b</code> del callback <code>onCheckedChanged</code> indica si el Switch está activado o no.</p>


      </google-codelab-step>
    
      <google-codelab-step label="CheckBox" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/CheckBox" target="_blank">https://developer.android.com/reference/android/widget/CheckBox</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/60b17397fec0f44f.gif"></p>
<pre><code>&lt;CheckBox
   android:id=&#34;@+id/checkBox&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;Marcame&#34; /&gt;</code></pre>
<pre><code>checkBox.setChecked(prefs.getBoolean(&#34;CHECKBOX&#34;, false));

checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
   @Override
   public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
       prefs.edit().putBoolean(&#34;CHECKBOX&#34;, b).apply();
   }
});</code></pre>
<p>El parámetro <code>b</code> del callback <code>onCheckedChanged</code> indica si el CheckBox está activado o no.</p>


      </google-codelab-step>
    
      <google-codelab-step label="CheckedTextView" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/CheckedTextView" target="_blank">https://developer.android.com/reference/android/widget/CheckedTextView</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/27d4bc49d628539f.gif"></p>
<pre><code>&lt;CheckedTextView
   android:id=&#34;@+id/checkedTextView&#34;
   android:text=&#34;Márcame&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:drawableRight=&#34;?android:attr/listChoiceIndicatorMultiple&#34;/&gt;</code></pre>
<pre><code>checkedTextView.setChecked(prefs.getBoolean(&#34;CHECKEDTEXTVIEW&#34;,false));

checkedTextView.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View view) {
       checkedTextView.toggle();
       prefs.edit().putBoolean(&#34;CHECKEDTEXTVIEW&#34;, checkedTextView.isChecked()).apply();
   }
});</code></pre>
<p>El CheckedTextView se usa principalmente para seleccionar ítems en listas. Ejemplo:</p>
<p class="image-container"><img style="width: 290.00px" src="img/bc05b2ab390bcaa.png"></p>
<p>Con el atributo <strong><code>android:drawableRight=&#34;?android:attr/listChoiceIndicatorMultiple&#34;</code></strong> personalizamos el icono.</p>
<p>El CheckedTextView responde al evento <code>onClick</code>, y en el callback lo tenemos que activar/desactivar manualmente.</p>


      </google-codelab-step>
    
      <google-codelab-step label="RadioGroup" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/RadioGroup" target="_blank">https://developer.android.com/reference/android/widget/RadioGroup</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/183c90695ca4fa57.gif"></p>
<pre><code>&lt;RadioGroup
   android:id=&#34;@+id/radioGroup&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   android:orientation=&#34;horizontal&#34;&gt;
   &lt;RadioButton
       android:id=&#34;@+id/radioButton&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:text=&#34;Option1&#34; /&gt;
   &lt;RadioButton
       android:id=&#34;@+id/radioButton2&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:text=&#34;Option2&#34; /&gt;
&lt;/RadioGroup&gt;</code></pre>
<pre><code>radioGroup.check(prefs.getInt(&#34;RADIOGROUP&#34;, radioGroup.getCheckedRadioButtonId()));

radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
   @Override
   public void onCheckedChanged(RadioGroup radioGroup, int i) {
       prefs.edit().putInt(&#34;RADIOGROUP&#34;, i).apply();
   }
});</code></pre>
<p>El RadioGroup solamente permite un elemento RadioButton activado en su interior.</p>
<p>El parámetro <code>i</code> del callback indica el elemento que se ha activado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Spinner" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/Spinner" target="_blank">https://developer.android.com/reference/android/widget/Spinner</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/2d437a6e79f3bb84.gif"></p>
<pre><code>&lt;Spinner
   android:id=&#34;@+id/spinner1&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:entries=&#34;@array/planets_array&#34;/&gt;

&lt;Spinner
   android:id=&#34;@+id/spinner2&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:spinnerMode=&#34;dialog&#34;/&gt;</code></pre>
<pre><code>&lt;string-array name=&#34;planets_array&#34;&gt;
   &lt;item&gt;Mercury&lt;/item&gt;
   &lt;item&gt;Venus&lt;/item&gt;
   &lt;item&gt;Earth&lt;/item&gt;
   &lt;item&gt;Mars&lt;/item&gt;
   &lt;item&gt;Jupiter&lt;/item&gt;
   &lt;item&gt;Saturn&lt;/item&gt;
   &lt;item&gt;Uranus&lt;/item&gt;
   &lt;item&gt;Neptune&lt;/item&gt;
&lt;/string-array&gt;</code></pre>
<pre><code>spinner1.setSelection(prefs.getInt(&#34;SPINNER1&#34;, 0));

spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
   @Override
   public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {
       prefs.edit().putInt(&#34;SPINNER1&#34;, i).apply();
   }

   @Override
   public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {

   }
});



String[] items = new String[]{&#34;Milky Way&#34;, &#34;Andromeda&#34;, &#34;Cassiopeia&#34;, &#34;Sagittarius&#34;, &#34;Pegasus&#34;};
ArrayAdapter&lt;String&gt; arrayAdapter = new ArrayAdapter&lt;&gt;(this, R.layout.support_simple_spinner_dropdown_item, items);
spinner2.setAdapter(arrayAdapter);

spinner2.setSelection(prefs.getInt(&#34;SPINNER2&#34;, 0));

spinner2.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
   @Override
   public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {
       prefs.edit().putInt(&#34;SPINNER2&#34;, i).apply();
   }

   @Override
   public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {
   }
});</code></pre>
<p>En esta muestra se han creado dos Spinners:</p>
<ul>
<li>El primero toma las diferentes opciones, en tiempo de diseño, del array <code>planets_array</code> definido en el fichero <code>strings.xml</code>. Se muestra como un desplegable. El parámetro <code>i</code> del callback <code>onItemSelected</code> indica el elemento que se ha seleccionado.</li>
<li>El segundo Spinner toma las diferentes opciones, en tiempo de ejecución, del array <code>items</code>. El parámetro <strong><code>android:spinnerMode=&#34;dialog&#34;</code></strong> hace que las opciones se muestren en un diálogo.</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="ProgressBar" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/ProgressBar" target="_blank">https://developer.android.com/reference/android/widget/ProgressBar</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/e644547077582259.gif"></p>
<pre><code>&lt;ProgressBar
   android:id=&#34;@+id/progressBar1&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;
&lt;ProgressBar
   android:id=&#34;@+id/progressBar2&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   style=&#34;?android:attr/progressBarStyleHorizontal&#34; /&gt;
&lt;Button
   android:id=&#34;@+id/startProgress&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;Start&#34; /&gt;</code></pre>
<pre><code>progressBar1.setVisibility(View.GONE);
progressBar2.setVisibility(View.GONE);

progressBar2.setMax(100);
progressBar2.setProgress(0);

startProgress.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View view) {
       new AsyncTask&lt;Integer, Integer, String&gt;() {
           @Override
           protected String doInBackground(Integer... integers) {
               int total = integers[0];
               int step = integers[1];
               for (int count=0; count &lt;= total/step; count++) {
                   try {
                       Thread.sleep(step);
                       publishProgress((int) (count*step/(float)total*100));
                   } catch (InterruptedException e) {
                       e.printStackTrace();
                   }
               }
               return &#34;Task Completed.&#34;;
           }
           @Override
           protected void onPreExecute() {
               startProgress.setText(&#34;Task Starting...&#34;);
               startProgress.setEnabled(false);
               progressBar1.setVisibility(View.VISIBLE);
               progressBar2.setVisibility(View.VISIBLE);

           }
           @Override
           protected void onProgressUpdate(Integer... values) {
               progressBar2.setProgress((int) (values[0]*progressBar2.getMax()/100.0f));
           }
           @Override
           protected void onPostExecute(String result) {
               Toast.makeText(MainActivity.this, result, Toast.LENGTH_SHORT).show();
               startProgress.setText(&#34;Restart&#34;);
               startProgress.setEnabled(true);
               progressBar1.setVisibility(View.GONE);
               progressBar2.setVisibility(View.GONE);
           }
       }.execute(1000, 10);
   }
});</code></pre>
<p>El primer ProgressBar se muestra como un círculo dando vueltas. En él no se puede establecer un progreso, simplemente se mantiene girando.</p>
<p>Con el atributo <strong><code>style=&#34;?android:attr/progressBarStyleHorizontal&#34;</code></strong> hacemos que el ProgressBar sea una barra horizontal, en la que se puede establecer un porcentage de progreso.</p>
<p>En esta muestra hemos puesto el botón <code>startProgress</code> para iniciar una &#34;tarea de fondo&#34; de ejemplo que simplemente cuenta hasta 1000 de 10 en 10. En cada paso actualiza el progreso del ProgressBar horizontal con el método <code>setProgress()</code>.</p>
<p>En un principio las dos ProgressBar estan ocultas (<code>View.</code><strong><em><code>GONE</code></em></strong>). Cuando se presiona el botón las dos se hacen visibles (<strong><code>View.</code></strong><strong><em><code>VISIBLE</code></em></strong>). Se va actualizando el progreso. Y cuando termina se vuelven a ocultar las ProgressBar.</p>


      </google-codelab-step>
    
      <google-codelab-step label="SeekBar" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/SeekBar" target="_blank">https://developer.android.com/reference/android/widget/SeekBar</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/b23b84ac4104bc01.gif"></p>
<pre><code>&lt;SeekBar
   android:id=&#34;@+id/seekBar&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;
&lt;SeekBar
   android:id=&#34;@+id/seekBar2&#34;
   style=&#34;@style/Widget.AppCompat.SeekBar.Discrete&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:max=&#34;10&#34; /&gt;</code></pre>
<pre><code>seekBar1.setProgress(prefs.getInt(&#34;SEEKBAR1&#34;,0));

seekBar1.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
   @Override
   public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
       prefs.edit().putInt(&#34;SEEKBAR1&#34;, i).apply();
   }

   @Override
   public void onStartTrackingTouch(SeekBar seekBar) {
   }

   @Override
   public void onStopTrackingTouch(SeekBar seekBar) {
   }
});



seekBar2.setProgress(prefs.getInt(&#34;SEEKBAR2&#34;,0));

seekBar2.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
   @Override
   public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
       prefs.edit().putInt(&#34;SEEKBAR2&#34;, i).apply();
   }

   @Override
   public void onStartTrackingTouch(SeekBar seekBar) {
   }

   @Override
   public void onStopTrackingTouch(SeekBar seekBar) {
   }
});</code></pre>
<p>Por defecto el mínimo valor del SeekBar es 0 y el máximo es 100.</p>
<p>Con el atributo <strong><code>style=&#34;@style/Widget.AppCompat.SeekBar.Discrete&#34;</code></strong>  hacemos que aparezca un círculo en cada valor posible de la barra.</p>
<p>El parámetro <code>i</code> del callback indica el valor seleccionado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="RatingBar" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/RatingBar" target="_blank">https://developer.android.com/reference/android/widget/RatingBar</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/3edcd8da22aa0736.gif"></p>
<pre><code>&lt;RatingBar
   android:id=&#34;@+id/ratingBar&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>ratingBar.setRating(prefs.getFloat(&#34;RATINGBAR&#34;, 0));

ratingBar.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() {
   @Override
   public void onRatingChanged(RatingBar ratingBar, float v, boolean b) {
       prefs.edit().putFloat(&#34;RATINGBAR&#34;, v);
   }
});</code></pre>
<p>El parámetro <code>v</code> del callback indica el valor seleccionado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="TimePicker" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/TimePicker" target="_blank">https://developer.android.com/reference/android/widget/TimePicker</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/78457de306bdac51.gif"></p>
<pre><code>&lt;TimePicker
   android:id=&#34;@+id/timePicker1&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:timePickerMode=&#34;spinner&#34; /&gt;
&lt;TimePicker
   android:id=&#34;@+id/timePicker2&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:timePickerMode=&#34;clock&#34; /&gt;</code></pre>
<pre><code>timePicker1.setHour(getPreferences(MODE_PRIVATE).getInt(&#34;TIMEPICKER1_HOUR&#34;, 0));
timePicker1.setMinute(getPreferences(MODE_PRIVATE).getInt(&#34;TIMEPICKER1_MINUTE&#34;, 0));

timePicker1.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {
   @Override
   public void onTimeChanged(TimePicker timePicker, int i, int i1) {
       prefs.edit()
               .putInt(&#34;TIMEPICKER1_HOUR&#34;, i)
               .putInt(&#34;TIMEPICKER1_MINUTE&#34;, i1)
               .apply();
   }
});



timePicker2.setHour(getPreferences(MODE_PRIVATE).getInt(&#34;TIMEPICKER2_HOUR&#34;, 0));
timePicker2.setMinute(getPreferences(MODE_PRIVATE).getInt(&#34;TIMEPICKER2_MINUTE&#34;, 0));

timePicker2.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {
   @Override
   public void onTimeChanged(TimePicker timePicker, int i, int i1) {
       prefs.edit()
               .putInt(&#34;TIMEPICKER2_HOUR&#34;, i)
               .putInt(&#34;TIMEPICKER2_MINUTE&#34;, i1)
               .apply();
   }
});</code></pre>
<p>El parámetro <code>i</code> del callback indica la hora seleccionada. El parámetro <code>i1</code> del callback indica el minuto seleccionado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="DatePicker" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/DatePicker" target="_blank">https://developer.android.com/reference/android/widget/DatePicker</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/85379a1f1aaa001e.gif"></p>
<pre><code>&lt;DatePicker
   android:id=&#34;@+id/datePicker1&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:datePickerMode=&#34;spinner&#34;
   android:calendarViewShown=&#34;false&#34;/&gt;
&lt;DatePicker
   android:id=&#34;@+id/datePicker2&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:datePickerMode=&#34;calendar&#34; /&gt;</code></pre>
<pre><code>datePicker1.updateDate(
       prefs.getInt(&#34;DATEPICKER1_YEAR&#34;, datePicker1.getYear()),
       prefs.getInt(&#34;DATEPICKER1_MONTH&#34;, datePicker1.getMonth()),
       prefs.getInt(&#34;DATEPICKER1_DAYOFMONTH&#34;, datePicker1.getDayOfMonth()));

datePicker1.setOnDateChangedListener(new DatePicker.OnDateChangedListener() {
   @Override
   public void onDateChanged(DatePicker datePicker, int i, int i1, int i2) {
       prefs.edit()
               .putInt(&#34;DATEPICKER1_YEAR&#34;, i)
               .putInt(&#34;DATEPICKER1_MONTH&#34;, i1)
               .putInt(&#34;DATEPICKER1_DAYOFMONTH&#34;, i2)
               .apply();
   }
});


datePicker2.updateDate(
       prefs.getInt(&#34;DATEPICKER2_YEAR&#34;, datePicker2.getYear()),
       prefs.getInt(&#34;DATEPICKER2_MONTH&#34;, datePicker2.getMonth()),
       prefs.getInt(&#34;DATEPICKER2_DAYOFMONTH&#34;, datePicker2.getDayOfMonth()));

datePicker2.setOnDateChangedListener(new DatePicker.OnDateChangedListener() {
   @Override
   public void onDateChanged(DatePicker datePicker, int i, int i1, int i2) {
       prefs.edit()
               .putInt(&#34;DATEPICKER2_YEAR&#34;, i)
               .putInt(&#34;DATEPICKER2_MONTH&#34;, i1)
               .putInt(&#34;DATEPICKER2_DAYOFMONTH&#34;, i2)
               .apply();
   }
});</code></pre>
<p>Hay dos tipos de DatePicker, el que muestra los <em>spinners</em> y el que muestra un calendario.</p>
<p>Con el método <code>updateDate()</code> se establece la fecha del DatePicker.</p>
<p>Los parámetros <code>i</code>, <code>i1</code>, <code>i2</code> del callback indican el año, el mes y el dia del mes que se han seleccionado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="CalendarView" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/CalendarView" target="_blank">https://developer.android.com/reference/android/widget/CalendarView</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/9f0a648338d1ea99.gif"></p>
<pre><code>&lt;CalendarView
   android:id=&#34;@+id/calendarView&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>calendarView.setDate(prefs.getLong(&#34;CALENDARVIEW&#34;, Calendar.getInstance().getTimeInMillis()));

calendarView.setOnDateChangeListener(new CalendarView.OnDateChangeListener() {
   @Override
   public void onSelectedDayChange(@NonNull CalendarView calendarView, int i, int i1, int i2) {
       Calendar.getInstance().set(i,i1,i2);

       prefs.edit().putLong(&#34;CALENDARVIEW&#34;, Calendar.getInstance().getTimeInMillis()).apply();
   }
});</code></pre>
<p>Para establecer la fecha en el CalendarView hay que pasarle los milisegundos que han pasado desde el &#34;1 de enero de 1970&#34;.</p>
<p>Para convertir una fecha en milisegundos usamos el método <code>getTimeInMillis()</code> de la clase <code>Calendar</code>. Primero tenemos que establecer la fecha del <code>Calendar</code> al año/mes/dia seleccionado con el método <code>set()</code>.</p>
<p>Los parámetros <code>i</code>, <code>i1</code>, <code>i2</code> del callback indican el año, el mes y el dia del mes que se han seleccionado.</p>


      </google-codelab-step>
    
      <google-codelab-step label="NumberPicker" duration="0">
        <p><a href="https://developer.android.com/reference/android/widget/NumberPicker" target="_blank">https://developer.android.com/reference/android/widget/NumberPicker</a></p>
<p class="image-container"><img style="width: 274.00px" src="img/36a25a87a64e28de.gif"></p>
<pre><code>&lt;NumberPicker
   android:id=&#34;@+id/numberPicker&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>numberPicker.setMinValue(1);
numberPicker.setMaxValue(10);

numberPicker.setValue(prefs.getInt(&#34;NUMBERPICKER&#34;, numberPicker.getMinValue()));

numberPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
   @Override
   public void onValueChange(NumberPicker numberPicker, int i, int i1) {
       prefs.edit().putInt(&#34;NUMBERPICKER&#34;, i1).apply();
   }
});</code></pre>
<p>El parámetro <code>i</code> del listener es el antiguo valor que tenia el NumberPicker, y el parámetro <code>i1</code> el nuevo valor seleccionado.</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
