
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Widgets</title>
  <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../../elements/codelab.html">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <style is="custom-style">
    body {
      font-family: "Roboto",sans-serif;
      background: var(--google-codelab-background, #F8F9FA);
    }
  </style>
  
</head>
<body unresolved class="fullbleed">

  <google-codelab title="Widgets"
                  environment="web"
                  feedback-link="https://github.com/gerardfp">
    
      <google-codelab-step label="Introducció" duration="0">
        <p>La clase <code>View</code> es el bloque de construcción básico para los componentes de Interfaz de Usuario. Una <code>View</code> ocupa un area rectangular en la pantalla y es responsable del dibujado y del manejo de eventos. <code>View</code> es la clase base para los widgets, los cuales se usan para crear componentes de Interfaz de Usuario interactivos (botones, campos de texto, etc.). La subclase <code>ViewGroup</code> es la clase base para <em>layouts</em>, que son contenedores invisibles que sustentan otras Views (o otros ViewGroups) y definen sus propiedades de disposición.</p>
<p>El objetivo de esta práctica es introducir el uso de diferentes <strong>Widgets</strong> de Interfaz de Usuario.</p>
<p>Actualmente existen un total de 139 subclases (directas e indirectas) de <a href="https://developer.android.com/reference/android/view/View.html" target="_blank"><code>View</code></a>. Veremos solamente algunas de ellas, en concreto:</p>
<ul>
<li>ToggleButton</li>
<li>Switch</li>
<li>CheckBox</li>
<li>CheckedTextView</li>
<li>RadioButton</li>
<li>Spinner</li>
<li>ProgressBar</li>
<li>SeekBar</li>
<li>RatingBar</li>
<li>TimePicker</li>
<li>TextClock</li>
<li>DatePicker</li>
<li>CalendarView</li>
<li>NumberPicker</li>
</ul>
<aside class="special"><p>Realiza una App que incorpore todos los Widgets incluidos en esta práctica. El estado de cada Widget se guarda en el fichero <code>SharedPreferences</code>, y se restaura al iniciar la Aplicación.</p>
<p>Usa el siguiente <em>layout </em>como base:</p>
<p><em><code>&lt;?</code></em><strong><code>xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;</code></strong><em><code>?&gt;</code></em></p>
<p><code>&lt;</code><strong><code>LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;</code></strong></p>
<p><strong><code>xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;</code></strong></p>
<p><strong><code>xmlns:tools=&#34;http://schemas.android.com/tools&#34;</code></strong></p>
<p><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:layout_height=&#34;match_parent&#34;</code></strong><code>&gt;</code></p>
<p><code>   &lt;</code><strong><code>ScrollView</code></strong></p>
<p><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:layout_height=&#34;match_parent&#34;</code></strong><code>&gt;</code></p>
<p><code>       &lt;</code><strong><code>LinearLayout</code></strong></p>
<p><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:layout_height=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:orientation=&#34;vertical&#34;</code></strong><code>&gt;</code></p>
<p><em><code>           &lt;!--Widgets--&gt;</code></em></p>
<p><code>       &lt;/</code><strong><code>LinearLayout</code></strong><code>&gt;</code></p>
<p><code>   &lt;/</code><strong><code>ScrollView</code></strong><code>&gt;</code></p>
<p><code>&lt;/</code><strong><code>LinearLayout</code></strong><code>&gt;</code></p>
<p>Incluye cada Widget dentro de un <code>CardView</code></p>
<p><code>&lt;</code><strong><code>TextView</code></strong></p>
<p><strong><code>android:layout_height=&#34;wrap_content&#34;</code></strong></p>
<p><strong><code>android:layout_width=&#34;wrap_content&#34;</code></strong></p>
<p><strong><code>   android:layout_margin=&#34;16dp&#34;</code></strong></p>
<p><strong><code>android:text=&#34;WidgetName&#34; </code></strong><code>/&gt;</code></p>
<p><code>&lt;</code><strong><code>android.support.v7.widget.CardView</code></strong></p>
<p><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:layout_height=&#34;wrap_content&#34;</code></strong></p>
<p><strong><code>android:layout_marginBottom=&#34;16dp&#34;</code></strong><code>&gt;</code></p>
<p><code>   &lt;</code><strong><code>LinearLayout</code></strong></p>
<p><strong><code>android:layout_width=&#34;match_parent&#34;</code></strong></p>
<p><strong><code>android:layout_height=&#34;wrap_content&#34;</code></strong></p>
<p><strong><code>android:orientation=&#34;vertical&#34;</code></strong></p>
<p><strong><code>android:padding=&#34;10dp&#34;</code></strong><code>&gt;</code></p>
<p><code>       &lt;</code><strong><code>Widget</code></strong></p>
<p><strong><code>android:id=&#34;@+id/widget&#34; </code></strong><code>/&gt;</code></p>
<p><code>   &lt;/</code><strong><code>LinearLayout</code></strong><code>&gt;</code></p>
<p><code>&lt;/</code><strong><code>android.support.v7.widget.CardView</code></strong><code>&gt;</code></p>
<p>Necesitarás incluir la dependencia de la librería <code>CardView</code> en el archivo <code>build.gradle</code> para el Module:app</p>
<p>Ajusta el número de versión, para que coincida con tu <code>compileSdkVersion</code></p>
<p><code>dependencies {</code></p>
<p><em><code>// ... other depencencies</code></em></p>
<p><code>implementation </code><strong><code>&#39;com.android.support:cardview-v7:25.+&#39;</code></strong></p>
<p><code>}</code></p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="ToggleButton" duration="0">
        <pre><code>&lt;ToggleButton
   android:id=&#34;@+id/toggleButton&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;ToggleButton&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       CompoundButton.OnCheckedChangeListener{

   static final String TOGGLEBUTTON = &#34;TOGGLEBUTTON&#34;;

   ToggleButton toggleButton;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      toggleButton = findViewById(R.id.toggleButton);

      toggleButton.setChecked(getPreferences(MODE_PRIVATE).getBoolean(TOGGLEBUTTON, true));

      toggleButton.setOnCheckedChangeListener(this);
   }

   @Override
   public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
      int id = compoundButton.getId();

      switch (id){
         case R.id.toggleButton:
            getPreferences(MODE_PRIVATE)
                 .edit()
                 .putBoolean(TOGGLEBUTTON, b)
                 .apply();
            break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Switch" duration="0">
        <pre><code>&lt;Switch
   android:id=&#34;@+id/switch1&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;Switch&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       CompoundButton.OnCheckedChangeListener {

   static final String SWITCH = &#34;SWITCH&#34;;

   Switch aSwitch;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       aSwitch = findViewById(R.id.switch1);

       aSwitch.setChecked(getPreferences(MODE_PRIVATE).getBoolean(SWITCH, false));

       aSwitch.setOnCheckedChangeListener(this);
   }

   
   @Override
   public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
       int id = compoundButton.getId();

       switch (id){
          case R.id.switch1:
               getPreferences(MODE_PRIVATE).edit()
                       .putBoolean(SWITCH, b)
                       .apply();
               break;

       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="CheckBox" duration="0">
        <pre><code>&lt;CheckBox
   android:id=&#34;@+id/checkBox&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;CheckBox&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       CompoundButton.OnCheckedChangeListener{

   static final String CHECKBOX = &#34;CHECKBOX&#34;;

   CheckBox checkBox;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       checkBox = (CheckBox) findViewById(R.id.checkBox);

       checkBox.setChecked(getPreferences(MODE_PRIVATE).getBoolean(CHECKBOX, true));

       checkBox.setOnCheckedChangeListener(this);
   }

   @Override
   public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
       int id = compoundButton.getId();
       switch (id){
           case R.id.checkBox:
               getPreferences(MODE_PRIVATE).edit()
                       .putBoolean(CHECKBOX, b)
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="CheckedTextView" duration="0">
        <pre><code>&lt;CheckedTextView
   android:id=&#34;@+id/checkedTextView&#34;
   android:text=&#34;CheckedTextView&#34;
   android:layout_width=&#34;fill_parent&#34;
   android:layout_height=&#34;40dip&#34;
   android:gravity=&#34;center_vertical&#34;
   android:drawableRight=&#34;?android:attr/listChoiceIndicatorMultiple&#34;/&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       View.OnClickListener {

   static final String CHECKEDTEXTVIEW = &#34;CHECKEDTEXTVIEW&#34;;

   CheckedTextView checkedTextView;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       checkedTextView = (CheckedTextView) findViewById(R.id.checkedTextView);

       checkedTextView.setChecked(getPreferences(MODE_PRIVATE).getBoolean(CHECKEDTEXTVIEW, true));

       checkedTextView.setOnClickListener(this);
   }

   @Override
   public void onClick(View view) {
       int id = view.getId();

       switch (id){
           case R.id.checkedTextView:
               getPreferences(MODE_PRIVATE).edit()
                      .putBoolean(CHECKEDTEXTVIEW, !checkedTextView.isChecked())
                      .apply();
               checkedTextView.toggle();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="RadioGroup" duration="0">
        <pre><code>&lt;RadioGroup
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;match_parent&#34;
   android:orientation=&#34;horizontal&#34;&gt;
   &lt;RadioButton
       android:id=&#34;@+id/radioButton&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:text=&#34;RadioButton&#34; /&gt;
   &lt;RadioButton
       android:id=&#34;@+id/radioButton2&#34;
       android:layout_width=&#34;wrap_content&#34;
       android:layout_height=&#34;wrap_content&#34;
       android:text=&#34;RadioButton2&#34; /&gt;
&lt;/RadioGroup&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       RadioGroup.OnCheckedChangeListener {

   static final String RADIOGROUP = &#34;RADIOGROUP&#34;;

   RadioGroup radioGroup;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       radioGroup = (RadioGroup) findViewById(R.id.radioGroup);

       radioGroup.check(
           getPreferences(MODE_PRIVATE).getInt(RADIOGROUP, radioGroup.getCheckedRadioButtonId()));

       radioGroup.setOnCheckedChangeListener(this);
   }

   @Override
   public void onCheckedChanged(RadioGroup radioGroup, @IdRes int i) {
       int id = radioGroup.getId();

       switch (id) {
           case R.id.radioGroup:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(RADIOGROUP, i)
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Spinner" duration="0">
        <pre><code>&lt;Spinner
   android:id=&#34;@+id/spinner&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;
&lt;Spinner
   android:id=&#34;@+id/spinner2&#34;
   android:spinnerMode=&#34;dialog&#34;
   android:prompt=&#34;@string/spinner2_prompt&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>&lt;string name=&#34;spinner2_prompt&#34;&gt;Choose you planet&lt;/string&gt;
&lt;string-array name=&#34;planets_array&#34;&gt;
   &lt;item&gt;Mercury&lt;/item&gt;
   &lt;item&gt;Venus&lt;/item&gt;
   &lt;item&gt;Earth&lt;/item&gt;
   &lt;item&gt;Mars&lt;/item&gt;
   &lt;item&gt;Jupiter&lt;/item&gt;
   &lt;item&gt;Saturn&lt;/item&gt;
   &lt;item&gt;Uranus&lt;/item&gt;
   &lt;item&gt;Neptune&lt;/item&gt;
&lt;/string-array&gt;
</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       AdapterView.OnItemSelectedListener {

   static final String SPINNER = &#34;SPINNER&#34;;
   static final String SPINNER2 = &#34;SPINNER2&#34;;

   Spinner spinner;
   Spinner spinner2;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       spinner = (Spinner) findViewById(R.id.spinner);
       spinner2 = (Spinner) findViewById(R.id.spinner2);

       ArrayAdapter&lt;CharSequence&gt; adapter = ArrayAdapter.createFromResource(this,
               R.array.planets_array, android.R.layout.simple_spinner_item);
       adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

       ArrayList&lt;String&gt; arrayItems = new ArrayList&lt;&gt;();
       Collections.addAll(arrayItems, &#34;Milky Way&#34;, &#34;Andromeda&#34;, &#34;Cassiopeia&#34;, &#34;Sagittarius&#34;, &#34;Pegasus&#34;);
 
       ArrayAdapter&lt;String&gt; adapter2 = new ArrayAdapter&lt;&gt;(this,
               android.R.layout.simple_spinner_item, arrayItems);
       adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

       spinner.setAdapter(adapter);
       spinner2.setAdapter(adapter2);

       spinner.setSelection(getPreferences(MODE_PRIVATE).getInt(SPINNER, 0));
       spinner2.setSelection(getPreferences(MODE_PRIVATE).getInt(SPINNER2, 0));

       spinner.setOnItemSelectedListener(this);
       spinner2.setOnItemSelectedListener(this);
   }

   @Override
   public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {
       int id = adapterView.getId();

       switch (id) {
           case R.id.spinner:
               System.out.println(&#34;SPINEER  &#34; + R.id.spinner);
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(SPINNER, i)
                       .apply();
               break;
           case R.id.spinner2:
               System.out.println(&#34;SPINEER2  &#34; + R.id.spinner2);
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(SPINNER2, i)
                       .apply();
               break;
       }
   }

   @Override
   public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {
      // Accion a tomar en caso de que el item seleccionado se elimine del array de items
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="ProgressBar" duration="0">
        <p>Indeterminate =&gt; Circular</p>
<p>Determinate =&gt; Horizontal</p>
<pre><code>&lt;ProgressBar
   android:id=&#34;@+id/progressBar&#34;
   style=&#34;?android:attr/progressBarStyle&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;
&lt;ProgressBar
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:id=&#34;@+id/progressBar2&#34;
   style=&#34;?android:attr/progressBarStyleHorizontal&#34; /&gt;
&lt;Button
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:text=&#34;Start&#34;
   android:id=&#34;@+id/button&#34;/&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity {

   ProgressBar progressBar;
   ProgressBar progressBar2;
   Button button;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       progressBar = (ProgressBar) findViewById(R.id.progressBar);
       progressBar2 = (ProgressBar) findViewById(R.id.progressBar2);

       progressBar.setVisibility(View.GONE);
       progressBar2.setVisibility(View.GONE);

       progressBar2.setMax(100);
       progressBar2.setProgress(0);

       button = (Button) findViewById(R.id.button);
       button.setOnClickListener(this);
   }

   @Override
   public void onClick(View view) {
       int id = view.getId();

       switch (id){
           case R.id.button:
               new AsyncTask&lt;Integer, Integer, String&gt;() {
                   @Override
                   protected String doInBackground(Integer... integers) {
                       int total = integers[0];
                       int step = integers[1];
                       for (int count=0; count &lt;= total/step; count++) {
                           try {
                               Thread.sleep(step);
                               publishProgress((int) (count*step/(float)total*100));
                           } catch (InterruptedException e) {
                               e.printStackTrace();
                           }
                       }
                       return &#34;Task Completed.&#34;;
                   }
                   @Override
                   protected void onPostExecute(String result) {
                       Toast.makeText(MainActivity.this, result, Toast.LENGTH_SHORT).show();
                       button.setText(&#34;Restart&#34;);
                       button.setEnabled(true);
                       progressBar.setVisibility(View.GONE);
                       progressBar2.setVisibility(View.GONE);

                   }
                   @Override
                   protected void onPreExecute() {
                       button.setText(&#34;Task Starting...&#34;);
                       button.setEnabled(false);
                       progressBar.setVisibility(View.VISIBLE);
                       progressBar2.setVisibility(View.VISIBLE);

                   }
                   @Override
                   protected void onProgressUpdate(Integer... values) {
                       progressBar2.setProgress((int) (values[0]*progressBar2.getMax()/100.0f));
                   }

               }.execute(1000, 10);

               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="SeekBar" duration="0">
        <pre><code>&lt;SeekBar
   android:id=&#34;@+id/seekBar&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;
&lt;SeekBar
   android:id=&#34;@+id/seekBar2&#34;
   style=&#34;@style/Widget.AppCompat.SeekBar.Discrete&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:max=&#34;10&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       SeekBar.OnSeekBarChangeListener {

   static final String SEEKBAR = &#34;SEEKBAR&#34;;
   static final String SEEKBAR2 = &#34;SEEKBAR2&#34;;

   SeekBar seekBar;
   SeekBar seekBar2;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       seekBar = (SeekBar) findViewById(R.id.seekBar);
       seekBar2 = (SeekBar) findViewById(R.id.seekBar2);

       seekBar.setProgress(getPreferences(MODE_PRIVATE).getInt(SEEKBAR, 0));
       seekBar2.setProgress(getPreferences(MODE_PRIVATE).getInt(SEEKBAR2, 0));

       seekBar.setOnSeekBarChangeListener(this);
       seekBar2.setOnSeekBarChangeListener(this);
   }

   @Override
   public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
       int id = seekBar.getId();
       switch (id){
           case R.id.seekBar:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(SEEKBAR, i)
                       .apply();
               break;
           case R.id.seekBar2:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(SEEKBAR2, i)
                       .apply();
               break;
       }
   }

   @Override
   public void onStartTrackingTouch(SeekBar seekBar) {

   }

   @Override
   public void onStopTrackingTouch(SeekBar seekBar) {

   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="RatingBar" duration="0">
        <pre><code>&lt;RatingBar
   android:id=&#34;@+id/ratingBar&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
       RatingBar.OnRatingBarChangeListener {

   static final String RATINGBAR = &#34;RATINGBAR&#34;;

   RatingBar ratingBar;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       ratingBar = (RatingBar) findViewById(R.id.ratingBar);

       ratingBar.setRating(getPreferences(MODE_PRIVATE).getFloat(RATINGBAR, 0f));
       ratingBar.setOnRatingBarChangeListener(this);
   }

   @Override
   public void onRatingChanged(RatingBar ratingBar, float v, boolean b) {
       int id = ratingBar.getId();
       switch (id){
           case R.id.ratingBar:
               getPreferences(MODE_PRIVATE).edit()
                       .putFloat(RATINGBAR, v)
                       .apply();
               break; 
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="TimePicker" duration="0">
        <pre><code>&lt;TimePicker
   android:id=&#34;@+id/timePicker&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:timePickerMode=&#34;spinner&#34; /&gt;
&lt;!--android:timePickerMode=&#34;clock&#34;--&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
      TimePicker.OnTimeChangedListener {

   static final String TIMEPICKERHOUR = &#34;TIMEPICKERHOUR&#34;;
   static final String TIMEPICKERMINUTE = &#34;TIMEPICKERMINUTE&#34;;

   TimePicker timePicker;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       timePicker = (TimePicker) findViewById(R.id.timePicker);

       timePicker.setIs24HourView(true);

       // API &gt;= 23
       //timePicker.setHour(getPreferences(MODE_PRIVATE).getInt(TIMEPICKERHOUR, 0));
       //timePicker.setCurrentMinute(getPreferences(MODE_PRIVATE).getInt(TIMEPICKERMINUTE, 0));

       // API &lt; 23
       timePicker.setCurrentHour(getPreferences(MODE_PRIVATE).getInt(TIMEPICKERHOUR, 0));
       timePicker.setCurrentMinute(getPreferences(MODE_PRIVATE).getInt(TIMEPICKERMINUTE, 0));

       timePicker.setOnTimeChangedListener(this);
   }

   @Override
   public void onTimeChanged(TimePicker timePicker, int hour, int minute) {
       int id = timePicker.getId();

       switch(id){
           case R.id.timePicker:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(TIMEPICKERHOUR, hour)
                       .putInt(TIMEPICKERMINUTE, minute)
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="TextClock" duration="0">
        <pre><code>&lt;TextClock
   android:id=&#34;@+id/textClock&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="DatePicker" duration="0">
        <pre><code>&lt;DatePicker
   android:id=&#34;@+id/datePicker&#34;
   android:layout_width=&#34;match_parent&#34;
   android:layout_height=&#34;wrap_content&#34;
   android:datePickerMode=&#34;spinner&#34;
   android:calendarViewShown=&#34;false&#34;/&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
      DatePicker.OnDateChangedListener {

   static final String DATEPICKERYEAR = &#34;DATEPICKERYEAR&#34;;
   static final String DATEPICKERMONTH = &#34;DATEPICKERMONTH&#34;;
   static final String DATEPICKERDAY = &#34;DATEPICKERDAY&#34;;

   DatePicker datePicker;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       datePicker= (DatePicker) findViewById(R.id.datePicker);

       // API &gt;= 26
       //datePicker.updateDate(2000, 12, 31);
       //datePicker.setOnDateChangedListener(this);

       datePicker.init(
            getPreferences(MODE_PRIVATE).getInt(DATEPICKERYEAR, datePicker.getYear()),
            getPreferences(MODE_PRIVATE).getInt(DATEPICKERMONTH, datePicker.getMonth()),
            getPreferences(MODE_PRIVATE).getInt(DATEPICKERDAY, datePicker.getDayOfMonth()),
            this);
   }

   @Override
   public void onDateChanged(DatePicker datePicker, int year, int month, int day) {
       int id = datePicker.getId();

       switch(id){
           case R.id.datePicker:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(DATEPICKERYEAR, year)
                       .putInt(DATEPICKERMONTH, month)
                       .putInt(DATEPICKERDAY, day)
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="CalendarView" duration="0">
        <pre><code>&lt;CalendarView
   android:id=&#34;@+id/calendarView&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
     CalendarView.OnDateChangeListener {

   static final String CALENDARVIEW = &#34;CALENDARVIEW&#34;;

   CalendarView calendarView;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       calendarView = (CalendarView) findViewById(R.id.calendarView);


       calendarView.setDate(getPreferences(MODE_PRIVATE).getLong(CALENDARVIEW,  
               Calendar.getInstance().getTimeInMillis()));

       calendarView.setOnDateChangeListener(this);
   }

   @Override
   public void onSelectedDayChange(@NonNull CalendarView calendarView, int year, int month, int day) {
       int id = calendarView.getId();

       switch(id){
           case R.id.calendarView:
               Calendar calendar = Calendar.getInstance();
               calendar.set(year, month, day);

               getPreferences(MODE_PRIVATE).edit()
                       .putLong(CALENDARVIEW, calendar.getTimeInMillis())
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="NumberPicker" duration="0">
        <pre><code>&lt;NumberPicker
   android:id=&#34;@+id/numberPicker&#34;
   android:layout_width=&#34;wrap_content&#34;
   android:layout_height=&#34;wrap_content&#34; /&gt;</code></pre>
<pre><code>public class MainActivity extends AppCompatActivity implements
     NumberPicker.OnValueChangeListener {

   static final String NUMBERPICKER = &#34;NUMBERPICKER&#34;;


   NumberPicker numberPicker;


   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       numberPicker = (NumberPicker) findViewById(R.id.numberPicker);

       numberPicker.setMinValue(1);
       numberPicker.setMaxValue(10);

      numberPicker.setValue(getPreferences(MODE_PRIVATE).getInt(NUMBERPICKER, 
             numberPicker.getMinValue()));

       numberPicker.setOnValueChangedListener(this);
   }

   @Override
   public void onValueChange(NumberPicker numberPicker, int oldVal, int newVal) {
       int id = numberPicker.getId();

       switch(id){
           case R.id.numberPicker:
               getPreferences(MODE_PRIVATE).edit()
                       .putInt(NUMBERPICKER, newVal)
                       .apply();
               break;
       }
   }
}</code></pre>


      </google-codelab-step>
    
  </google-codelab>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49880327-14', 'auto');

    (function() {
      var gaCodelab = '';
      if (gaCodelab) {
        ga('create', gaCodelab, 'auto', {name: 'codelab'});
      }

      var gaView;
      var parts = location.search.substring(1).split('&');
      for (var i = 0; i < parts.length; i++) {
        var param = parts[i].split('=');
        if (param[0] === 'viewga') {
          gaView = param[1];
          break;
        }
      }
      if (gaView && gaView !== gaCodelab) {
        ga('create', gaView, 'auto', {name: 'view'});
      }
    })();
  </script>

</body>
</html>
